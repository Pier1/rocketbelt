"use strict";!function(l,C,r){l.typography=l.typography||{};var o=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw Error("maxHeight is required");var n="string"==typeof e?C.querySelectorAll(e):e;if(n){var l=a.character||"…",r=a.classname||"clampable_clamped-text",o="clampable_clamped-placeholder",c=a.clampedMarkup,i="boolean"!=typeof a.spaces||a.spaces,p=c?'<span class="'+o+'">… '+c+"</span>":'<span class="'+o+'">'+l+"</span>";"length"in n||(n=[n]);for(var s=0;s<n.length;s+=1){var h=n[s];h.classList.add("clampable-clamped");var m=h.style,y=h.querySelector("."+r),g=void 0===h.textContent?"innerText":"textContent";y&&(h.removeChild(h.querySelector("."+o)),h[g]=h[g]);var u=h[g],f=i?u.split(" "):u;if(!(f.length<2)){var d=m.height;m.height="auto";var v=m.maxHeight;if(m.maxHeight="none",h.offsetHeight<=t)m.height=d,m.maxHeight=v;else if("auto"!==t){for(var b=f.length-1,H=0,x=void 0;H<b;)x=H+b+1>>1,h[g]=i?f.slice(0,x).join(" "):f.slice(0,x),h.insertAdjacentHTML("beforeend",p),h.offsetHeight>t?b=i?x-1:x-2:H=x;h[g]=i?f.slice(0,b).join(" "):f.slice(0,b),h.insertAdjacentHTML("beforeend",p);var q=i?" "+f.slice(b).join(" "):f.slice(b);h.insertAdjacentHTML("beforeend",'<span class="'+r+'" style="display:none;">'+q+"</span>"),m.height=d,m.maxHeight=v}else m.maxHeight=v}}}};l.typography.clamp=function(e,t,a){var n=getComputedStyle(C.querySelectorAll(e)[0]).lineHeight.replace("px","");o(e,t*n,a),C.querySelectorAll(e).forEach(function(e){e.dispatchEvent(new CustomEvent("rb.typography.clamp")),a&&(a.onClamp&&a.onClamp(e),a.onUnclamp&&l.once(e,"rb.typography.unclamp",a.onUnclamp));var t=e.querySelector("button");t&&r(t).click(function(){l.typography.unclamp(r(this).closest(".clampable-clamped").first())})})},l.typography.unclamp=function(e){o(e,"auto");for(var t="string"==typeof e?C.querySelectorAll(e):e,a=0;a<t.length;a++)t[a].dispatchEvent(new CustomEvent("rb.typography.unclamp"))}}(window.rb,document,jQuery);
//# sourceMappingURL=rocketbelt.typography.min.js.map
