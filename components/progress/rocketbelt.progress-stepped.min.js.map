{"version":3,"sources":["components/progress/rocketbelt.progress-stepped.min.js"],"names":["rb","document","onAttrMutation","mutations","mutationsLen","length","i","mutation","target","attributes","getNamedItem","aria","current","span","createElement","textContent","setAttribute","querySelector","linksToDisable","linksLen","parentNode","querySelectorAll","j","link","disabled","linkToEnable","hiddenText","decorateProgressStepped","progressIndicators","progressIndicatorsLen","progressIndicator","label","hasAttribute","MutationObserver","subtree","attributeOldValue","attributeFilter","sibsLen","sibs","sib","window"],"mappings":"AAAA,cACA,SAAEA,EAAIC,GAGJ,SAASC,EAAeC,GAGtB,IAAK,IAHPC,EAAAD,EAAAE,OAGWC,EAAI,EAAGA,EAAIF,EAAcE,IAAK,CAAvC,IAAKC,EAAWD,EAAIF,GAKlB,KAJiBD,EAAjBK,OAAAC,WAGkCC,aAAaC,EAAKC,SACpD,CAEE,IAAAC,EAAAZ,EAAAa,cAAA,QACAD,EAAMA,YAAOZ,iBACbY,EAAKE,aAAL,QAAmB,mBACnBF,EAAKG,OAAAA,aAAsBH,EAAAN,EAA3BC,OAAAS,cAAA,MAcC,IAAA,IAXDC,EACAX,EAKMY,OAFDC,WAIAC,iBAPL,IAOoBF,EAAUG,QAP9B,SAOmCX,EAAAC,QAPnC,YAQQW,EAAOL,EAAbb,OAEDiB,EAAA,EAAAA,EAAAH,EAAAG,IAAA,CACIJ,EAAAI,GACPN,aAAAL,EAAAa,UAAA,QAEEC,CADA,IAAMA,EAAelB,EAASC,OAAOS,cAAc,KAInDQ,EAAIC,gBAAYf,EAAAa,UACdE,IAAAA,EAAWX,EAAcK,WAAzBH,cAAA,oBAEHS,IACFA,EAAAX,YAAA,iBAGH,SAASY,IAOL,IAAA,IAHGC,EAAeC,EAAAA,iBAA4B,qBACxCC,EAAoBF,EAA1BvB,OAEKyB,EAAAA,EAAAA,EAAAA,EAAoCC,IAApC,CACHD,IAAAA,EAAkBd,EAAyBV,GADxCwB,EAAkBE,aAAarB,EAAKoB,QAIzCD,EAAkBd,aAAaL,EAA/BoB,MAAA,sBAGAD,EAAiBd,aAAIiB,OAAiB,OAAiB/B,EAAeC,aAAf,WAAA,KACtC2B,IAAAA,iBAAmB,SAAA3B,GAAAD,EAAAC,KAClC+B,QADkCJ,GAElCrB,SAAAA,EACA0B,YAAAA,EACAC,mBAAkBzB,EAJpByB,iBAAAzB,EAAAC,WAQA,IAAIA,EAAUkB,EAAAb,cAAA,IAAAN,EAAAC,QAAA,KACZA,IACAA,EAAQI,EAAkBJ,cAA1B,OACDI,aAAAL,EAAAC,QAAA,QAEDA,EAAQK,cAAc,KAAKD,aAAaL,EAAKa,SAAU,QAMrD,IAAA,IAHIa,EAAAA,EAANhB,iBAAMgB,IAAN1B,EAAAC,QAAMyB,YAAAA,EAAUC,EAAKjC,OAGbkC,EAAMD,EAAAA,EAAZD,EAAAf,IAAA,CACIN,EAAaL,GAClBK,aAAAL,EAAAa,SAAA,UAhFN,IAAAb,EAAKV,EAAAA,KAqFJD,EAAG4B,gBAAAA,GACH5B,EAAG4B,mBAAmBD,EAAAA,uBAtFxB3B,EAuFGwC,mBAvFHb,wBAAAA,EAAA,CAuFGa,OAAOxC,GAAIC","file":"rocketbelt.progress-stepped.min.js","sourcesContent":["'use strict';\n((rb, document) => {\n  const aria = rb.aria;\n\n  function onAttrMutation(mutations) {\n    const mutationsLen = mutations.length;\n\n    for (let i = 0; i < mutationsLen; i++) {\n      const mutation = mutations[i];\n      const attributes = mutation.target.attributes;\n\n      const hasAriaCurrent = attributes.getNamedItem(aria.current) ? true : false;\n      // If target's attributes include aria-current\n      if (hasAriaCurrent) {\n        // Add visually-hidden descriptor\n        const span = document.createElement('span');\n        span.textContent = 'Current Step: ';\n        span.setAttribute('class', 'visually-hidden');\n        mutation.target.insertBefore(span, mutation.target.querySelector('a'));\n\n        // Decorate current & subsequent links with aria-disabled\n        const linksToDisable =\n          mutation\n            .target\n            .parentNode\n            .querySelectorAll(`[${aria.current}] a, [${aria.current}] ~ li a`);\n        const linksLen = linksToDisable.length;\n\n        for (let j = 0; j < linksLen; j++) {\n          const link = linksToDisable[j];\n          link.setAttribute(aria.disabled, true);\n        }\n      } else {\n      // If target doesn't have aria-current, remove aria-disabled from child link\n        const linkToEnable = mutation.target.querySelector('a');\n        linkToEnable.removeAttribute(aria.disabled);\n        const hiddenText = linkToEnable.parentNode.querySelector('.visually-hidden');\n\n        if (hiddenText) {\n          hiddenText.textContent = 'Completed: ';\n        }\n      }\n    }\n  }\n\n  function decorateProgressStepped() {\n    const progressIndicators = document.querySelectorAll('.progress-stepped');\n    const progressIndicatorsLen = progressIndicators.length;\n\n    for (let i = 0; i < progressIndicatorsLen; i++) {\n      const progressIndicator = progressIndicators[i];\n\n      if (!progressIndicator.hasAttribute(aria.label)) {\n        progressIndicator.setAttribute(aria.label, 'Progress Indicator');\n      }\n\n      progressIndicator.setAttribute('role', 'nav');\n      progressIndicator.setAttribute('tabindex', '0');\n\n      const observer = new MutationObserver((mutations) => { onAttrMutation(mutations); });\n      observer.observe(progressIndicator, {\n        subtree: true,\n        attributes: true,\n        attributeOldValue: true,\n        attributeFilter: [aria.current]\n      });\n\n      let current = progressIndicator.querySelector(`[${aria.current}]`);\n      if (!current) {\n        current = progressIndicator.querySelector('li');\n        current.setAttribute(aria.current, 'page');\n      }\n\n      current.querySelector('a').setAttribute(aria.disabled, 'true');\n\n      const sibs = progressIndicator.querySelectorAll(`[${aria.current}] ~ li a`);\n      const sibsLen = sibs.length;\n\n      for (let j = 0; j < sibsLen; j++) {\n        const sib = sibs[j];\n        sib.setAttribute(aria.disabled, 'true');\n      }\n    }\n  }\n\n  rb.onDocumentReady(decorateProgressStepped);\n  rb.progressIndicators = rb.progressIndicators || {};\n  rb.progressIndicators.decorateProgressStepped = decorateProgressStepped;\n})(window.rb, document);\n"],"sourceRoot":"../.."}