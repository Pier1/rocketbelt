{"version":3,"sources":["components/progress/rocketbelt.progress-stepped.min.js"],"names":["rb","document","onAttrMutation","mutations","mutationsLen","length","i","mutation","target","attributes","getNamedItem","aria","current","linksToDisable","parentNode","querySelectorAll","linksLen","j","setAttribute","disabled","querySelector","removeAttribute","decorateProgressStepped","progressIndicators","progressIndicatorsLen","progressIndicator","hasAttribute","label","MutationObserver","observe","subtree","attributeOldValue","attributeFilter","sibs","sibsLen","onDocumentReady","window"],"mappings":"CAAA,SAAoCA,EAAIC,GAGtC,SAASC,EAAeC,GAGtB,IAAK,IAFDC,EAAeD,EAAUE,OAEpBC,EAAI,EAAGA,EAAIF,EAAcE,IAAK,CACrC,IAAIC,EAAWJ,EAAUG,GAKzB,KAJiBC,EAASC,OAAOC,WAEDC,aAAaC,EAAKC,SAOhD,IAAK,IAHDC,EAAiBN,EAASC,OAAOM,WAAWC,iBAAiB,IAAMJ,EAAKC,QAAU,SAAWD,EAAKC,QAAU,YAC5GI,EAAWH,EAAeR,OAErBY,EAAI,EAAGA,EAAID,EAAUC,IAAK,CACtBJ,EAAeI,GACrBC,aAAaP,EAAKQ,UAAU,OAE9B,CAEcZ,EAASC,OAAOY,cAAc,KACpCC,gBAAgBV,EAAKQ,YAKxC,SAASG,IAIP,IAAK,IAHDC,EAAqBtB,EAASc,iBAAiB,qBAC/CS,EAAwBD,EAAmBlB,OAEtCC,EAAI,EAAGA,EAAIkB,EAAuBlB,IAAK,CAC9C,IAAImB,EAAoBF,EAAmBjB,GAEtCmB,EAAkBC,aAAaf,EAAKgB,QACvCF,EAAkBP,aAAaP,EAAKgB,MAAO,sBAG7CF,EAAkBP,aAAa,OAAQ,OAExB,IAAIU,iBAAiB,SAAkBzB,GAAaD,EAAeC,KACzE0B,QAAQJ,GAAqBK,SAAS,EAAMrB,YAAY,EAAMsB,mBAAmB,EAAMC,iBAAkBrB,EAAKC,WAEvH,IAAIA,EAAUa,EAAkBL,cAAc,IAAMT,EAAKC,QAAU,KAC9DA,IACHA,EAAUa,EAAkBL,cAAc,OAClCF,aAAaP,EAAKC,QAAS,QAGrCA,EAAQQ,cAAc,KAAKF,aAAaP,EAAKQ,SAAU,QAKvD,IAAK,IAHDc,EAAOR,EAAkBV,iBAAiB,IAAMJ,EAAKC,QAAU,YAC/DsB,EAAUD,EAAK5B,OAEVY,EAAI,EAAGA,EAAIiB,EAASjB,IAAK,CACtBgB,EAAKhB,GACXC,aAAaP,EAAKQ,SAAU,UAzDtC,IAAIR,EAAOX,EAAGW,KA8DdX,EAAGmC,gBAAgBb,GACnBtB,EAAGuB,mBAAqBvB,EAAGuB,uBAC3BvB,EAAGuB,mBAAmBD,wBAA0BA,EAjElD,CAkEGc,OAAOpC,GAAIC","file":"rocketbelt.progress-stepped.min.js","sourcesContent":["(function rocketbeltProgressStepped(rb, document) {\n  var aria = rb.aria;\n\n  function onAttrMutation(mutations) {\n    var mutationsLen = mutations.length;\n\n    for (var i = 0; i < mutationsLen; i++) {\n      var mutation = mutations[i];\n      var attributes = mutation.target.attributes;\n\n      var hasAriaCurrent = attributes.getNamedItem(aria.current) ? true : false;\n      // If target's attributes include aria-current\n      if (hasAriaCurrent) {\n        // Decorate current & subsequent links with aria-disabled\n        var linksToDisable = mutation.target.parentNode.querySelectorAll('[' + aria.current + '] a, [' + aria.current + '] ~ li a');\n        var linksLen = linksToDisable.length;\n\n        for (var j = 0; j < linksLen; j++) {\n          var link = linksToDisable[j];\n          link.setAttribute(aria.disabled, true);\n        }\n      } else {\n      // If target doesn't have aria-current, remove aria-disabled from child link\n        var linkToEnable = mutation.target.querySelector('a');\n        linkToEnable.removeAttribute(aria.disabled);\n      }\n    }\n  }\n\n  function decorateProgressStepped() {\n    var progressIndicators = document.querySelectorAll('.progress-stepped');\n    var progressIndicatorsLen = progressIndicators.length;\n\n    for (var i = 0; i < progressIndicatorsLen; i++) {\n      var progressIndicator = progressIndicators[i];\n\n      if (!progressIndicator.hasAttribute(aria.label)) {\n        progressIndicator.setAttribute(aria.label, 'Progress Indicator');\n      }\n\n      progressIndicator.setAttribute('role', 'nav');\n\n      var observer = new MutationObserver(function onmutate(mutations) { onAttrMutation(mutations); });\n      observer.observe(progressIndicator, { subtree: true, attributes: true, attributeOldValue: true, attributeFilter: [aria.current] });\n\n      var current = progressIndicator.querySelector('[' + aria.current + ']');\n      if (!current) {\n        current = progressIndicator.querySelector('li');\n        current.setAttribute(aria.current, 'page');\n      }\n\n      current.querySelector('a').setAttribute(aria.disabled, 'true');\n\n      var sibs = progressIndicator.querySelectorAll('[' + aria.current + '] ~ li a');\n      var sibsLen = sibs.length;\n\n      for (var j = 0; j < sibsLen; j++) {\n        var sib = sibs[j];\n        sib.setAttribute(aria.disabled, 'true');\n      }\n    }\n  }\n\n  rb.onDocumentReady(decorateProgressStepped);\n  rb.progressIndicators = rb.progressIndicators || {};\n  rb.progressIndicators.decorateProgressStepped = decorateProgressStepped;\n})(window.rb, document);\n"],"sourceRoot":"../.."}