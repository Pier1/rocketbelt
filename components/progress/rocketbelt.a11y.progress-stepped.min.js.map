{"version":3,"sources":["components/progress/rocketbelt.a11y.progress-stepped.min.js"],"names":["window","document","onAttrMutation","mutations","mutationsLen","length","i","mutation","target","attributes","getNamedItem","ARIA_CURRENT","linksToDisable","parentNode","querySelectorAll","linksLen","j","link","setAttribute","querySelector","removeAttribute","decorateProgressStepped","progressIndicators","progressIndicatorsLen","progressIndicator","hasAttribute","MutationObserver","observe","subtree","attributeOldValue","attributeFilter","rb","onDocumentReady"],"mappings":"CAAA,SAAwCA,EAAQC,GAG9C,QAASC,GAAeC,GAGtB,IAAK,GAFDC,GAAeD,EAAUE,OAEpBC,EAAI,EAAGA,EAAIF,EAAcE,IAAK,CACrC,GAAIC,GAAWJ,EAAUG,EAKzB,MAJiBC,EAASC,OAAOC,WAEDC,aAAaC,GAO3C,IAAK,GAHDC,GAAiBL,EAASC,OAAOK,WAAWC,iBAAiB,IAAMH,EAAe,SAAWA,EAAe,YAC5GI,EAAWH,EAAeP,OAErBW,EAAI,EAAGA,EAAID,EAAUC,IAAK,CACjC,GAAIC,GAAOL,EAAeI,EAC1BC,GAAKC,aAAa,iBAAiB,OAEhC,CAEcX,EAASC,OAAOW,cAAc,KACpCC,gBAAgB,mBAKnC,QAASC,KAIP,IAAK,GAHDC,GAAqBrB,EAASa,iBAAiB,qBAC/CS,EAAwBD,EAAmBjB,OAEtCC,EAAI,EAAGA,EAAIiB,EAAuBjB,IAAK,CAC9C,GAAIkB,GAAoBF,EAAmBhB,EAEtCkB,GAAkBC,aAAa,eAClCD,EAAkBN,aAAa,aAAc,sBAG/CM,EAAkBN,aAAa,OAAQ,MAExB,IAAIQ,kBAAiB,SAAkBvB,GAAaD,EAAeC,KACzEwB,QAAQH,GAAqBI,SAAS,EAAMnB,YAAY,EAAMoB,mBAAmB,EAAMC,iBAAkB,iBAEpGN,GAAkBL,cAAc,IAAMR,EAAe,MAEjEa,EAAkBL,cAAc,MAAMD,aAAaP,EAAc,SA9CvE,GAAIA,GAAe,cAmDnBX,GAAO+B,GAAGC,gBAAgBX,IACzBrB,OAAQC","file":"rocketbelt.a11y.progress-stepped.min.js","sourcesContent":["(function rocketbeltA11yProgressStepped(window, document) {\n  var ARIA_CURRENT = 'aria-current';\n\n  function onAttrMutation(mutations) {\n    var mutationsLen = mutations.length;\n\n    for (var i = 0; i < mutationsLen; i++) {\n      var mutation = mutations[i];\n      var attributes = mutation.target.attributes;\n\n      var hasAriaCurrent = attributes.getNamedItem(ARIA_CURRENT) ? true : false;\n      // If target's attributes include aria-current\n      if (hasAriaCurrent) {\n        // Decorate current & subsequent links with aria-disabled\n        var linksToDisable = mutation.target.parentNode.querySelectorAll('[' + ARIA_CURRENT + '] a, [' + ARIA_CURRENT + '] ~ li a');\n        var linksLen = linksToDisable.length;\n\n        for (var j = 0; j < linksLen; j++) {\n          var link = linksToDisable[j];\n          link.setAttribute('aria-disabled', true);\n        }\n      } else {\n      // If target doesn't have aria-current, remove aria-disabled from child link\n        var linkToEnable = mutation.target.querySelector('a');\n        linkToEnable.removeAttribute('aria-disabled');\n      }\n    }\n  }\n\n  function decorateProgressStepped() {\n    var progressIndicators = document.querySelectorAll('.progress-stepped');\n    var progressIndicatorsLen = progressIndicators.length;\n\n    for (var i = 0; i < progressIndicatorsLen; i++) {\n      var progressIndicator = progressIndicators[i];\n\n      if (!progressIndicator.hasAttribute('aria-label')) {\n        progressIndicator.setAttribute('aria-label', 'Progress Indicator');\n      }\n\n      progressIndicator.setAttribute('role', 'nav');\n\n      var observer = new MutationObserver(function onmutate(mutations) { onAttrMutation(mutations); });\n      observer.observe(progressIndicator, { subtree: true, attributes: true, attributeOldValue: true, attributeFilter: ['aria-current'] });\n\n      var current = progressIndicator.querySelector('[' + ARIA_CURRENT + ']');\n      if (!current) {\n        progressIndicator.querySelector('li').setAttribute(ARIA_CURRENT, 'page');\n      }\n    }\n  }\n\n  window.rb.onDocumentReady(decorateProgressStepped);\n})(window, document);\n"],"sourceRoot":"../.."}