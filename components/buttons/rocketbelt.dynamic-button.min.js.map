{"version":3,"sources":["components/buttons/rocketbelt.dynamic-button.min.js"],"names":["$","dynamicButton","el","buttonActionBusy","btnClass","baseWidth","btn","this","find","text","base","opts","busyText","baseText","prop","css","addClass","$el","trigger","type","buttonActionComplete","statusMsg","customDelay","stateText","btnStateIcon","textSlot","delay","recognizedMsg","outerWidth","hide","indexOf","removeClass","show","setTimeout","buttonReset","data","init","dynamicElements","extend","defaultOptions","successText","failureText","empty","append","on","e","call","fn","options","method","methodResult","methods","apply","Array","prototype","slice","arguments","console","warn","each","jQuery"],"mappings":"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","file":"rocketbelt.dynamic-button.min.js","sourcesContent":["(function($) {\n  $.dynamicButton = function(el) {\n    var base = this;\n    base.el = el;\n    base.$el = $(el);\n    base.$el.data(\"dynamicButton\", base);\n\n    base.init = function(){\n      base.opts = $.extend({}, $.dynamicButton.defaultOptions);\n      base.opts.baseText = base.$el.text() || base.opts.baseText;\n      base.opts.busyText = base.$el.data('busy-text') || base.opts.busyText;\n      base.opts.successText = base.$el.data('success-text') || base.opts.successText;\n      base.opts.failureText = base.$el.data('failure-text') || base.opts.failureText;\n\n      function dynamicElements () {\n        var textEl = '<span class=\"button-state-text\">' + base.opts.baseText + '</span>';\n        var busyIcon = '<span class=\"button-state-icon\"></span>';\n        var newStructure = textEl + busyIcon;\n\n        return newStructure;\n      }\n\n\n      // Build Button DOM\n      (base.$el).empty().append(dynamicElements);\n\n      // Init Variables\n      var baseText = base.opts.baseText;\n      // Because button has to go into a busy state first, we initilize btnClass with \"busy\" classes\n      var btnClass = base.opts.busyText ? 'button-busy button-state-with-text' : 'button-busy';\n      var baseWidth = base.$el.outerWidth();\n\n      // Event attachment\n      base.$el.on('click', function(e) {\n        buttonActionBusy.call(this, btnClass, baseWidth);\n      });\n\n      base.$el.on('buttonActionComplete', function(e, statusMsg, customDelay) {\n        if (statusMsg === 'success') { var stateText = base.opts.successText}\n        if (statusMsg === 'failure') { var stateText = base.opts.failureText}\n        buttonActionComplete.call(this, statusMsg, customDelay, btnClass, baseWidth, baseText, stateText);\n      });\n\n    };\n\n    base.init();\n\n    function buttonActionBusy(btnClass, baseWidth){\n      // busyClass arg here is determined whether/not busy-state has text\n      var btn = $(this),\n      textSlot = btn.find('.button-state-text');\n      \n      textSlot.text(base.opts.busyText ? base.opts.busyText : base.opts.baseText);\n      btn.prop('disabled',true).css('min-width',baseWidth).addClass(btnClass);\n\n      base.$el.trigger({\n          type: \"dynamicButton.busy\",\n          el: base.el\n       });\n    }\n\n    function buttonActionComplete (statusMsg, customDelay, btnClass, baseWidth, baseText, stateText) {\n      var btn = $(this),\n      btnStateIcon = btn.find('.button-state-icon'),\n      textSlot = btn.find('.button-state-text'),\n      delay = customDelay || 0;\n\n      var recognizedMsg = ['success','failure'];\n\n      btn.css('min-width',btn.outerWidth());\n      btnStateIcon.hide();\n\n      if (recognizedMsg.indexOf(statusMsg) > -1) {\n        delay = customDelay || 2000;\n\n        btn.removeClass(btnClass);\n        btnClass = stateText ? 'button-state-with-text' : '';\n        btnClass += ' button-' + statusMsg;\n\n        btn.css('min-width',baseWidth);\n        btn.addClass(btnClass);\n        textSlot.text(stateText);\n      }\n\n      btnStateIcon.show();\n\n      setTimeout(function() {\n        buttonReset(btn, btnClass, textSlot, baseText)\n      }, delay)\n    }\n\n    function buttonReset (btn, btnClass, textSlot, baseText) {\n      textSlot.text(baseText);\n      btn.prop('disabled',false).css('min-width', 'auto').removeClass(btnClass);\n    }\n\n  };\n\n    $.dynamicButton.defaultOptions = {\n        baseText: '',\n        busyText: null\n    };\n\n    $.fn.dynamicButton = function(options){\n        var dynamicButton, method, methodResult;\n        if ( typeof options === 'string' ){\n            method = options;\n            dynamicButton = this.data('dynamicButton');\n            if (dynamicButton) {\n                if (dynamicButton.methods[method]) {\n                    methodResult = dynamicButton.methods[method].apply(dynamicButton, Array.prototype.slice.call( arguments, 1 ) );\n                } else {\n                    console.warn('The method ' + method + ' does not exist in dynamicButton.');\n                }\n            }\n            return methodResult || this;\n        }\n        return this.each(function(){\n            $.data(this, 'dynamicButton') || ( new $.dynamicButton(this, options) );\n        });\n    };\n \n})(jQuery);"],"sourceRoot":"../.."}