{"version":3,"sources":["components/buttons/rocketbelt.buttons-dropdown.min.js"],"names":["rb","document","decorateDropdowns","triggers","querySelectorAll","triggersLen","length","onChange","e","input","target","checked","ddContent","parentNode","querySelector","setAttribute","aria","expanded","hidden","i","trigger","label","defaultButton","ddLabelledBy","id","getShortId","triggerId","haspopup","labelledby","addEventListener","path","pathLen","shouldClose","j","el","classList","contains","ddTriggers","ddTriggersLen","k","onDocumentReady","buttons","window"],"mappings":"CAAA,SAAoCA,EAAIC,GAGtC,SAASC,IAoBP,IAAK,IAnBDC,EAAWF,EAASG,iBAAiB,4BACrCC,EAAcF,EAASG,OAIvBC,EAAW,SAAmBC,GAChC,IAAIC,EAAQD,EAAEE,OACVC,EAAUF,EAAME,QAChBC,EAAYJ,EAAEE,OAAOG,WAAWC,cAAc,4BAE9CH,GACFF,EAAMM,aAAaC,EAAKC,UAAU,GAClCL,EAAUG,aAAaC,EAAKE,QAAQ,KAEpCT,EAAMM,aAAaC,EAAKC,UAAU,GAClCL,EAAUG,aAAaC,EAAKE,QAAQ,KAI/BC,EAAI,EAAGA,EAAId,EAAac,IAAK,CACpC,IAAIC,EAAUjB,EAASgB,GACnBE,EAAQD,EAAQP,WAAWC,cAAc,SACzCF,EAAYQ,EAAQP,WAAWC,cAAc,4BAC7CQ,EAAgBF,EAAQP,WAAWC,cApBX,mBAqBxBS,EAAeD,EAAcE,GAAKF,EAAcE,GAAK,WAAaxB,EAAGyB,aAE9DL,EAAQP,WAAWC,cAAc,+BACvCC,aAAaC,EAAKE,QAAQ,GAE/B,IAAIQ,EAAYN,EAAQI,GAAKJ,EAAQI,GAAK,WAAaxB,EAAGyB,aAC1DL,EAAQI,GAAKE,EACbL,EAAMN,aAAa,MAAOW,GAEtBd,IACFU,EAAcE,GAAKD,EAEnBH,EAAQL,aAAaC,EAAKW,UAAU,GACpCP,EAAQL,aAAaC,EAAKC,UAAU,GACpCG,EAAQL,aAAaC,EAAKK,MAAO,mBAEjCT,EAAUG,aAAaC,EAAKE,QAAQ,GACpCN,EAAUG,aAAaC,EAAKY,WAAYL,IAG1CH,EAAQS,iBAAiB,SAAU,SAAgBrB,GAAKD,EAASC,KAGnEP,EAAS4B,iBAAiB,QAAS,SAAiBrB,GAKlD,IAAK,IAJDsB,EAAOtB,EAAEsB,KACTC,EAAUD,EAAKxB,OACf0B,GAAc,EAETC,EAAI,EAAGA,EAAIF,EAASE,IAAK,CAChC,IAAIC,EAAKJ,EAAKG,GAEd,GAAIC,EAAGC,YAAcD,EAAGC,UAAUC,SAAS,4BAA8BF,EAAGC,UAAUC,SAAS,yBAA2BF,EAAGC,UAAUC,SAAS,4BAA6B,CAC3KJ,GAAc,EACd,OAIJ,GAAIA,EAIF,IAAK,IAHDK,EAAapC,EAASG,iBAAiB,4BACvCkC,EAAgBD,EAAW/B,OAEtBiC,EAAI,EAAGA,EAAID,EAAeC,IACjCF,EAAWE,GAAG5B,SAAU,IArEhC,IAAIK,EAAOhB,EAAGgB,KA2EdhB,EAAGwC,gBAAgBtC,GACnBF,EAAGyC,QAAUzC,EAAGyC,YAChBzC,EAAGyC,QAAQvC,kBAAoBA,EA9EjC,CA+EGwC,OAAO1C,GAAIC","file":"rocketbelt.buttons-dropdown.min.js","sourcesContent":["(function rocketbeltButtonsDropdown(rb, document) {\n  var aria = rb.aria;\n\n  function decorateDropdowns() {\n    var triggers = document.querySelectorAll('.button-dropdown_trigger');\n    var triggersLen = triggers.length;\n\n    var DEFAULT_BUTTON_SELECTOR = '.button, button';\n\n    var onChange = function onFocusIn(e) {\n      var input = e.target;\n      var checked = input.checked;\n      var ddContent = e.target.parentNode.querySelector('.button-dropdown_content');\n\n      if (checked) {\n        input.setAttribute(aria.expanded, true);\n        ddContent.setAttribute(aria.hidden, false);\n      } else {\n        input.setAttribute(aria.expanded, false);\n        ddContent.setAttribute(aria.hidden, true);\n      }\n    };\n\n    for (var i = 0; i < triggersLen; i++) {\n      var trigger = triggers[i];\n      var label = trigger.parentNode.querySelector('label');\n      var ddContent = trigger.parentNode.querySelector('.button-dropdown_content');\n      var defaultButton = trigger.parentNode.querySelector(DEFAULT_BUTTON_SELECTOR);\n      var ddLabelledBy = defaultButton.id ? defaultButton.id : 'rb-a11y_' + rb.getShortId();\n\n      var icon = trigger.parentNode.querySelector('.button-dropdown_icon .icon');\n      icon.setAttribute(aria.hidden, true);\n\n      var triggerId = trigger.id ? trigger.id : 'rb-a11y_' + rb.getShortId();\n      trigger.id = triggerId;\n      label.setAttribute('for', triggerId);\n\n      if (ddContent) {\n        defaultButton.id = ddLabelledBy;\n\n        trigger.setAttribute(aria.haspopup, true);\n        trigger.setAttribute(aria.expanded, false);\n        trigger.setAttribute(aria.label, 'Toggle Dropdown');\n\n        ddContent.setAttribute(aria.hidden, true);\n        ddContent.setAttribute(aria.labelledby, ddLabelledBy);\n      }\n\n      trigger.addEventListener('change', function change(e) { onChange(e); });\n    }\n\n    document.addEventListener('click', function onclick(e) {\n      var path = e.path;\n      var pathLen = path.length;\n      var shouldClose = true;\n\n      for (var j = 0; j < pathLen; j++) {\n        var el = path[j];\n\n        if (el.classList && (el.classList.contains('button-dropdown_content') || el.classList.contains('button-dropdown_icon') || el.classList.contains('button-dropdown_trigger'))) {\n          shouldClose = false;\n          break;\n        }\n      }\n\n      if (shouldClose) {\n        var ddTriggers = document.querySelectorAll('.button-dropdown_trigger');\n        var ddTriggersLen = ddTriggers.length;\n\n        for (var k = 0; k < ddTriggersLen; k++) {\n          ddTriggers[k].checked = false;\n        }\n      }\n    });\n  }\n\n  rb.onDocumentReady(decorateDropdowns);\n  rb.buttons = rb.buttons || {};\n  rb.buttons.decorateDropdowns = decorateDropdowns;\n})(window.rb, document);\n"],"sourceRoot":"../.."}