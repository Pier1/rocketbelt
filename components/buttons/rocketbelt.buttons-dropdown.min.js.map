{"version":3,"sources":["components/buttons/rocketbelt.buttons-dropdown.min.js"],"names":["window","document","decorateDropdowns","triggers","querySelectorAll","triggersLen","length","onChange","e","input","target","checked","ddContent","parentNode","querySelector","setAttribute","i","trigger","label","defaultButton","ddLabelledBy","id","rb","getShortId","triggerId","addEventListener","onDocumentReady"],"mappings":"CAAA,SAAwCA,EAAQC,GAC9C,QAASC,KAsBP,IAAK,GArBDC,GAAWF,EAASG,iBAAiB,4BACrCC,EAAcF,EAASG,OAMvBC,EAAW,SAAmBC,GAChC,GAAIC,GAAQD,EAAEE,OACVC,EAAUF,EAAME,QAChBC,EAAYJ,EAAEE,OAAOG,WAAWC,cAAc,2BAE9CH,IACFF,EAAMM,aATU,iBASkB,GAClCH,EAAUG,aATI,eASsB,KAEpCN,EAAMM,aAZU,iBAYkB,GAClCH,EAAUG,aAZI,eAYsB,KAI/BC,EAAI,EAAGA,EAAIX,EAAaW,IAAK,CACpC,GAAIC,GAAUd,EAASa,GACnBE,EAAQD,EAAQJ,WAAWC,cAAc,SACzCF,EAAYK,EAAQJ,WAAWC,cAAc,4BAC7CK,EAAgBF,EAAQJ,WAAWC,cAtBX,mBAuBxBM,EAAeD,EAAcE,GAAKF,EAAcE,GAAK,WAAarB,EAAOsB,GAAGC,YAErEN,GAAQJ,WAAWC,cAAc,+BACvCC,aAxBW,eAwBe,EAE/B,IAAIS,GAAYP,EAAQI,GAAKJ,EAAQI,GAAK,WAAarB,EAAOsB,GAAGC,YACjEN,GAAQI,GAAKG,EACbN,EAAMH,aAAa,MAAOS,GAEtBZ,IACFO,EAAcE,GAAKD,EAEnBH,EAAQF,aAAa,iBAAiB,GACtCE,EAAQF,aAnCQ,iBAmCoB,GACpCE,EAAQF,aAAa,aAAc,mBAEnCH,EAAUG,aArCI,eAqCsB,GACpCH,EAAUG,aAAa,oBAAqBK,IAG9CH,EAAQQ,iBAAiB,SAAU,SAAgBjB,GAAKD,EAASC,MAIrER,EAAOsB,GAAGI,gBAAgBxB,IACzBF,OAAQC","file":"rocketbelt.buttons-dropdown.min.js","sourcesContent":["(function rocketbeltA11yButtonsDropdown(window, document) {\n  function decorateDropdowns() {\n    var triggers = document.querySelectorAll('.button-dropdown_trigger');\n    var triggersLen = triggers.length;\n\n    var DEFAULT_BUTTON_SELECTOR = '.button, button';\n    var ARIA_EXPANDED = 'aria-expanded';\n    var ARIA_HIDDEN = 'aria-hidden';\n\n    var onChange = function onFocusIn(e) {\n      var input = e.target;\n      var checked = input.checked;\n      var ddContent = e.target.parentNode.querySelector('.button-dropdown_content');\n\n      if (checked) {\n        input.setAttribute(ARIA_EXPANDED, true);\n        ddContent.setAttribute(ARIA_HIDDEN, false);\n      } else {\n        input.setAttribute(ARIA_EXPANDED, false);\n        ddContent.setAttribute(ARIA_HIDDEN, true);\n      }\n    };\n\n    for (var i = 0; i < triggersLen; i++) {\n      var trigger = triggers[i];\n      var label = trigger.parentNode.querySelector('label');\n      var ddContent = trigger.parentNode.querySelector('.button-dropdown_content');\n      var defaultButton = trigger.parentNode.querySelector(DEFAULT_BUTTON_SELECTOR);\n      var ddLabelledBy = defaultButton.id ? defaultButton.id : 'rb-a11y_' + window.rb.getShortId();\n\n      var icon = trigger.parentNode.querySelector('.button-dropdown_icon .icon');\n      icon.setAttribute(ARIA_HIDDEN, true);\n\n      var triggerId = trigger.id ? trigger.id : 'rb-a11y_' + window.rb.getShortId();\n      trigger.id = triggerId;\n      label.setAttribute('for', triggerId);\n\n      if (ddContent) {\n        defaultButton.id = ddLabelledBy;\n\n        trigger.setAttribute('aria-haspopup', true);\n        trigger.setAttribute(ARIA_EXPANDED, false);\n        trigger.setAttribute('aria-label', 'Toggle Dropdown');\n\n        ddContent.setAttribute(ARIA_HIDDEN, true);\n        ddContent.setAttribute('aria-labellededby', ddLabelledBy);\n      }\n\n      trigger.addEventListener('change', function change(e) { onChange(e); });\n    }\n  }\n\n  window.rb.onDocumentReady(decorateDropdowns);\n})(window, document);\n"],"sourceRoot":"../.."}