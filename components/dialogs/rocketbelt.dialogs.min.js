$(function(){function e(){return{appendTo:"body",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null}}function t(e){$cache.main.hasClass("is-dialog-open")||(this.hasOwnProperty("defaultElement")?element=$(this.defaultElement):element=this?$(this):$(element),$.extend(!0,f,e),f.appendTo&&($cache.main=$(f.appendTo)),f.title&&$cache.rbDialogTitle.html(f.title),f.classes&&a(),0!==f.buttons.length&&i(),$cache.rbDialog.data("options",f),$.each(closers,function(e,t){t.addEventListener("click",d)}),$.contains($cache.rbDialogBody[0],element[0])||$cache.rbDialogBody[0].appendChild(element[0]),element.show())}function a(){f.classes.rbDialog&&("dialog"!==f.classes.rbDialog?$cache.rbDialog.attr("class","dialog "+f.classes.rbDialog):$cache.rbDialog.attr("class","dialog")),f.classes.rbDialogTitle&&$cache.rbDialogTitle.addClass(f.classes.rbDialogTitle),f.classes.rbDialogBody&&$cache.rbDialogBody.addClass(f.classes.rbDialogBody)}function i(){var e=f.buttons;$.isEmptyObject(e)||$.isArray(e)&&!e.length||-1!==f.classes.rbDialog.indexOf("dialog-max")||($cache.rbDialogButtons&&$cache.rbDialogButtons.remove(),$(".dialog_content").append($('<div class="dialog_buttons"></div>')),$cache.rbDialogButtons=$(".dialog_buttons"),$.each(e,function(e,t){var a,i;t=$.isFunction(t)?{click:t,text:e}:t,t=$.extend({type:"button"},t),a=t.click,i={class:"button "+t.classes,text:t.text},delete t.click,delete t.classes,"boolean"==typeof t.text&&delete t.text,$("<button></button>",t).attr("class",i.class).text(i.text).appendTo($cache.rbDialogButtons).on("click",function(){a.apply($cache.rbDialog,arguments[0])})}))}function o(e){var t=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];return $(e).find(t.join(","))}function n(e,t){var a=o(e),i=a.index($(document.activeElement));t.shiftKey&&0===i?(a[a.length-1].focus(),t.preventDefault()):t.shiftKey||i!==a.length-1||(a[0].focus(),t.preventDefault())}function l(e){var t=o(e);t.length&&t[0].focus()}function c(e){var t=!$cache.rbDialog[0].hasAttribute("aria-hidden");t&&27===e.which&&(e.preventDefault(),d()),t&&9===e.which&&n($cache.rbDialog,e)}function s(e){var t;e&&(e.target?t=e.target:e.srcElement&&(t=e.srcElement)),$cache.rbDialog[0].hasAttribute("aria-hidden")||$cache.rbDialog[0].contains(t)||l($cache.rbDialog)}function r(){$cache.main.hasClass("is-dialog-open")||($cache.main.addClass("is-dialog-open").attr("aria-hidden",!0),$cache.rbDialog.removeAttr("aria-hidden"),u=$(document.activeElement),l($cache.rbDialog[0]),document.body.addEventListener("focus",s,!0),$(document).keydown(c),$cache.rbDialog.trigger("rbDialog:open"),b("open"))}function d(){b("beforeClose"),$cache.rbDialog[0].hasAttribute("aria-hidden")||($cache.main.removeClass("is-dialog-open").removeAttr("aria-hidden"),$cache.rbDialog.attr("aria-hidden","true"),u&&u.focus(),document.body.removeEventListener("focus",s,!0),document.removeEventListener("keydown",c),$.each(closers,function(e,t){t.removeEventListener("click",d)}),$cache.rbDialog.trigger("rbDialog:close"),b("close"),g())}function g(){document.body.style.animation?$cache.rbDialog.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){setTimeout(h,200)}):setTimeout(h,200)}function h(){$cache.rbDialogButtons&&$cache.rbDialogButtons.remove(),$cache.main.append($cache.rbDialogBody.children("*").detach().hide()),$cache.rbDialogTitle.text(""),f=e()}function b(e,t,a){var i,o,n=f[e];if(a=a||{},t=$.Event(t),t.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=element[0],o=t.originalEvent)for(i in o)i in t||(t[i]=o[i]);return element.trigger(t,a),!($.isFunction(n)&&!1===n.apply(element[0],[t].concat(a))||t.isDefaultPrevented())}var u,f=e();$cache={main:$(f.appendTo),rbDialog:$(".dialog").last(),rbDialogTitle:$(".dialog .dialog_title").last(),rbDialogBody:$(".dialog .dialog_body").last()},element=null,closers=$($cache.rbDialog).find("[data-rb-dialog-hide]"),$.fn.rbDialog=function(e){if("string"!=typeof e&&t.call(this,e),"close"===e)d();else if("destroy"===e)g();else if("open"===e||f.autoOpen)r();else{if("options"===e)return f;if("isOpen"===e)return $cache.main.hasClass("is-dialog-open")}return null}});
//# sourceMappingURL=rocketbelt.dialogs.min.js.map
