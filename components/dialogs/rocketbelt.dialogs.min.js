!function(e){"use strict";function t(e,t){if(e){"string"==typeof e?e=document.querySelectorAll(e):e.tagName&&(e=[e]);for(var n=0;n<e.length;n++)(" "+e[n].className+" ").indexOf(" "+t+" ")<0&&(e[n].className+=" "+t)}}function n(e,t){if(e){"string"==typeof e?e=document.querySelectorAll(e):e.tagName&&(e=[e]);for(var n=new RegExp("(^| )"+t+"($| )","g"),o=0;o<e.length;o++)e[o].className=e[o].className.replace(n," ")}}function o(e,t,n){function o(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}o.prototype=window.Event.prototype;var i;(i=window.CustomEvent&&"function"==typeof window.CustomEvent?new window.CustomEvent(t,{detail:n}):new o(t,{bubbles:!1,cancelable:!1,detail:n}))&&e.dispatchEvent(i)}function i(e){return a(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","),e).filter(function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)})}function a(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}function r(e,t){var n=i(e),o=n.indexOf(document.activeElement);t.shiftKey&&0===o?(n[n.length-1].focus(),t.preventDefault()):t.shiftKey||o!==n.length-1||(n[0].focus(),t.preventDefault())}function d(e){var t=i(e);t.length&&t[0].focus()}var c,s=function(e,i){function s(t){v.shown&&27===t.which&&(t.preventDefault(),f(t.which)),v.shown&&9===t.which&&r(e,t)}function u(t){v.shown&&!e.contains(t.target)&&d(e)}function l(){v.shown||(v.shown=!0,t(i,"is-dialog-open"),e.removeAttribute("aria-hidden"),i.setAttribute("aria-hidden","true"),c=document.activeElement,d(e),document.body.addEventListener("focus",u,!0),document.addEventListener("keydown",s),o(e,"dialog:show",this))}function f(t){v.shown&&(void 0===event.target.dataset.rbDialogHide&&void 0===event.target.parentElement.dataset.rbDialogHide&&void 0===event.target.parentElement.parentElement.dataset.rbDialogHide&&27!==t||(v.shown=!1,n(i,"is-dialog-open"),e.setAttribute("aria-hidden","true"),i.removeAttribute("aria-hidden"),c&&c.focus(),document.body.removeEventListener("focus",u,!0),document.removeEventListener("keydown",s),o(e,"dialog:hide",this)))}function h(){f(),m.forEach(function(e){e.removeEventListener("click",l)}),b.forEach(function(e){e.removeEventListener("click",f)})}i=i||document.querySelector("#main");var v=this,m=a('[data-rb-dialog-show="'+e.id+'"]'),b=a("[data-rb-dialog-hide]",e).concat(a('[data-rb-dialog-hide="'+e.id+'"]'));e.hasAttribute("aria-hidden")&&(this.shown=!JSON.parse(e.getAttribute("aria-hidden"))),this.show=l,this.hide=f,this.destroy=h,m.forEach(function(e){e.addEventListener("click",l)}),b.forEach(function(e){e.addEventListener("click",f)})};"undefined"!=typeof module&&void 0!==module.exports?module.exports=s:"function"==typeof define&&define.amd?define("rbDialog",[],function(){return s}):"object"==typeof e&&(e.rbDialog=s)}(this),function(){document.addEventListener("DOMContentLoaded",function(){for(var e=document.querySelectorAll(".dialog"),t=e.length,n=0;n<t;n++){var o=e[n],i=o.dataset.rbDialogObscures,a=document.getElementById(i);a.parentNode.insertBefore(o,a.nextSibling);new window.rbDialog(o,a)}})}();
//# sourceMappingURL=rocketbelt.dialogs.min.js.map
