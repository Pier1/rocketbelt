$(function(){function e(e){g.appendTo.hasClass("is-dialog-open")||(u=this.hasOwnProperty("defaultElement")?$(this.defaultElement):this?$(this):$(u),$.extend(!0,c,e),c.appendTo&&(g.appendTo=$(c.appendTo)),c.blurElement&&(g.blurElement=$(c.blurElement)),c.title&&g.rbDialogTitle.html(c.title),c.classes&&function(){c.classes.rbDialog&&("dialog"!==c.classes.rbDialog?g.rbDialog.attr("class","dialog "+c.classes.rbDialog):g.rbDialog.attr("class","dialog"));c.classes.rbDialogTitle&&g.rbDialogTitle.addClass(c.classes.rbDialogTitle);c.classes.rbDialogBody&&g.rbDialogBody.addClass(c.classes.rbDialogBody)}(),0!==c.buttons.length&&function(){var e=c.buttons;if($.isEmptyObject(e)||$.isArray(e)&&!e.length||-1!==c.classes.rbDialog.indexOf("dialog-max"))return;g.rbDialogButtons&&g.rbDialogButtons.remove();$(".dialog_content").append($('<div class="dialog_buttons"></div>')),g.rbDialogButtons=$(".dialog_buttons"),$.each(e,function(e,t){var o,i;t=$.isFunction(t)?{click:t,text:e}:t,t=$.extend({type:"button"},t),o=t.click,i={class:"button "+t.classes,text:t.text},delete t.click,delete t.classes,"boolean"==typeof t.text&&delete t.text,$("<button></button>",t).attr("class",i.class).text(i.text).appendTo(g.rbDialogButtons).on("click",function(){o.apply(g.rbDialog,arguments[0])})})}(),g.rbDialog.data("options",c),$.each(p,function(e,t){t.addEventListener("click",l)}),$.contains(g.rbDialogBody[0],u[0])||g.rbDialogBody.append(u),u.show())}function t(e){return $(e).find(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","))}function o(e){var o=t(e);o.length&&o[0].focus()}function i(e){var o=!g.rbDialog[0].hasAttribute("aria-hidden");o&&27===e.which&&(e.preventDefault(),l()),o&&9===e.which&&function(e,o){var i=t(e),a=i.index($(document.activeElement));o.shiftKey&&0===a?(i[i.length-1].focus(),o.preventDefault()):o.shiftKey||a!==i.length-1||(i[0].focus(),o.preventDefault())}(g.rbDialog,e)}function a(e){var t;e&&(e.target?t=e.target:e.srcElement&&(t=e.srcElement)),g.rbDialog[0].hasAttribute("aria-hidden")||g.rbDialog[0].contains(t)||o(g.rbDialog)}function l(){r("beforeClose"),g.rbDialog[0].hasAttribute("aria-hidden")||(g.appendTo.removeClass("is-dialog-open"),g.appendTo.css("top","0"),$(window).scrollTop(b),g.blurElement.removeClass("dialog_blur").removeAttr("aria-hidden"),g.rbDialog.attr("aria-hidden","true"),d&&d.focus(),document.body.removeEventListener("focus",a,!0),document.removeEventListener("keydown",i),$.each(p,function(e,t){t.removeEventListener("click",l)}),g.rbDialog.trigger("rbDialog:close"),r("close"),n())}function n(){document.body.style.animation?g.rbDialog.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){setTimeout(s,200)}):setTimeout(s,200)}function s(){g.rbDialogButtons&&g.rbDialogButtons.remove(),g.appendTo.append(g.rbDialogBody.children("*").detach().hide()),g.rbDialogTitle.text(""),c={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null}}function r(e,t,o){var i,a,l=c[e];if(o=o||{},t=$.Event(t),t.type=this?(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase():e,t.target=u[0],a=t.originalEvent)for(i in a)i in t||(t[i]=a[i]);return u.trigger(t,o),!($.isFunction(l)&&!1===l.apply(u[0],[t].concat(o))||t.isDefaultPrevented())}var d,b,c={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null},g={appendTo:$(c.appendTo),blurElement:$(c.blurElement),rbDialog:$(".dialog").last(),rbDialogTitle:$(".dialog .dialog_title").last(),rbDialogBody:$(".dialog .dialog_body").last()},u=null,p=$(g.rbDialog).find("[data-rb-dialog-hide]");$.fn.rbDialog=function(t){if("string"!=typeof t&&e.call(this,t),"close"===t)l();else if("destroy"===t)n();else if("open"===t||c.autoOpen)g.appendTo.hasClass("is-dialog-open")||(b=$(window).scrollTop(),g.appendTo.css("top","-"+b+"px"),g.appendTo.addClass("is-dialog-open"),g.blurElement.addClass("dialog_blur").attr("aria-hidden",!0),g.rbDialog.removeAttr("aria-hidden"),d=$(document.activeElement),o(g.rbDialog[0]),document.body.addEventListener("focus",a,!0),$(document).keydown(i),g.rbDialog.trigger("rbDialog:open"),r("open"));else{if("options"===t)return c;if("isOpen"===t)return g.appendTo.hasClass("is-dialog-open")}return null}});
//# sourceMappingURL=rocketbelt.dialogs.min.js.map
