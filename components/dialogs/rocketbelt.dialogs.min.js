$(function(){function e(e){$cache.appendTo.hasClass("is-dialog-open")||(this.hasOwnProperty("defaultElement")?element=$(this.defaultElement):element=this?$(this):$(element),$.extend(!0,d,e),d.appendTo&&($cache.appendTo=$(d.appendTo)),d.blurElement&&($cache.blurElement=$(d.blurElement)),d.title&&$cache.rbDialogTitle.html(d.title),d.classes&&function(){d.classes.rbDialog&&("dialog"!==d.classes.rbDialog?$cache.rbDialog.attr("class","dialog "+d.classes.rbDialog):$cache.rbDialog.attr("class","dialog"));d.classes.rbDialogTitle&&$cache.rbDialogTitle.addClass(d.classes.rbDialogTitle);d.classes.rbDialogBody&&$cache.rbDialogBody.addClass(d.classes.rbDialogBody)}(),0!==d.buttons.length&&function(){var e=d.buttons;if($.isEmptyObject(e)||$.isArray(e)&&!e.length||-1!==d.classes.rbDialog.indexOf("dialog-max"))return;$cache.rbDialogButtons&&$cache.rbDialogButtons.remove();$(".dialog_content").append($('<div class="dialog_buttons"></div>')),$cache.rbDialogButtons=$(".dialog_buttons"),$.each(e,function(e,t){var a,o;t=$.isFunction(t)?{click:t,text:e}:t,t=$.extend({type:"button"},t),a=t.click,o={class:"button "+t.classes,text:t.text},delete t.click,delete t.classes,"boolean"==typeof t.text&&delete t.text,$("<button></button>",t).attr("class",o.class).text(o.text).appendTo($cache.rbDialogButtons).on("click",function(){a.apply($cache.rbDialog,arguments[0])})})}(),$cache.rbDialog.data("options",d),$.each(closers,function(e,t){t.addEventListener("click",i)}),$.contains($cache.rbDialogBody[0],element[0])||$cache.rbDialogBody[0].appendChild(element[0]),element.show())}function t(e){return $(e).find(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","))}function a(e){var a=t(e);a.length&&a[0].focus()}function o(e){var a=!$cache.rbDialog[0].hasAttribute("aria-hidden");a&&27===e.which&&(e.preventDefault(),i()),a&&9===e.which&&function(e,a){var o=t(e),l=o.index($(document.activeElement));a.shiftKey&&0===l?(o[o.length-1].focus(),a.preventDefault()):a.shiftKey||l!==o.length-1||(o[0].focus(),a.preventDefault())}($cache.rbDialog,e)}function l(e){var t;e&&(e.target?t=e.target:e.srcElement&&(t=e.srcElement)),$cache.rbDialog[0].hasAttribute("aria-hidden")||$cache.rbDialog[0].contains(t)||a($cache.rbDialog)}function i(){s("beforeClose"),$cache.rbDialog[0].hasAttribute("aria-hidden")||($cache.appendTo.removeClass("is-dialog-open"),$cache.blurElement.removeClass("dialog_blur").removeAttr("aria-hidden"),$cache.rbDialog.attr("aria-hidden","true"),r&&r.focus(),document.body.removeEventListener("focus",l,!0),document.removeEventListener("keydown",o),$.each(closers,function(e,t){t.removeEventListener("click",i)}),$cache.rbDialog.trigger("rbDialog:close"),s("close"),n())}function n(){document.body.style.animation?$cache.rbDialog.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){setTimeout(c,200)}):setTimeout(c,200)}function c(){$cache.rbDialogButtons&&$cache.rbDialogButtons.remove(),$cache.appendTo.append($cache.rbDialogBody.children("*").detach().hide()),$cache.rbDialogTitle.text(""),d={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null}}function s(e,t,a){var o,l,i=d[e];if(a=a||{},t=$.Event(t),t.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=element[0],l=t.originalEvent)for(o in l)o in t||(t[o]=l[o]);return element.trigger(t,a),!($.isFunction(i)&&!1===i.apply(element[0],[t].concat(a))||t.isDefaultPrevented())}var r,d={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null};$cache={appendTo:$(d.appendTo),blurElement:$(d.blurElement),rbDialog:$(".dialog").last(),rbDialogTitle:$(".dialog .dialog_title").last(),rbDialogBody:$(".dialog .dialog_body").last()},element=null,closers=$($cache.rbDialog).find("[data-rb-dialog-hide]"),$.fn.rbDialog=function(t){if("string"!=typeof t&&e.call(this,t),"close"===t)i();else if("destroy"===t)n();else if("open"===t||d.autoOpen)$cache.appendTo.hasClass("is-dialog-open")||($cache.appendTo.addClass("is-dialog-open"),$cache.blurElement.addClass("dialog_blur").attr("aria-hidden",!0),$cache.rbDialog.removeAttr("aria-hidden"),r=$(document.activeElement),a($cache.rbDialog[0]),document.body.addEventListener("focus",l,!0),$(document).keydown(o),$cache.rbDialog.trigger("rbDialog:open"),s("open"));else{if("options"===t)return d;if("isOpen"===t)return $cache.appendTo.hasClass("is-dialog-open")}return null}});
//# sourceMappingURL=rocketbelt.dialogs.min.js.map
