$(function(){function e(){return{appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null}}function t(e){$cache.appendTo.hasClass("is-dialog-open")||(this.hasOwnProperty("defaultElement")?element=$(this.defaultElement):element=this?$(this):$(element),$.extend(!0,p,e),p.appendTo&&($cache.appendTo=$(p.appendTo)),p.blurElement&&($cache.blurElement=$(p.blurElement)),p.title&&$cache.rbDialogTitle.html(p.title),p.classes&&a(),0!==p.buttons.length&&o(),$cache.rbDialog.data("options",p),$.each(closers,function(e,t){t.addEventListener("click",d)}),$.contains($cache.rbDialogBody[0],element[0])||$cache.rbDialogBody[0].appendChild(element[0]),element.show())}function a(){p.classes.rbDialog&&("dialog"!==p.classes.rbDialog?$cache.rbDialog.attr("class","dialog "+p.classes.rbDialog):$cache.rbDialog.attr("class","dialog")),p.classes.rbDialogTitle&&$cache.rbDialogTitle.addClass(p.classes.rbDialogTitle),p.classes.rbDialogBody&&$cache.rbDialogBody.addClass(p.classes.rbDialogBody)}function o(){var e=p.buttons;$.isEmptyObject(e)||$.isArray(e)&&!e.length||-1!==p.classes.rbDialog.indexOf("dialog-max")||($cache.rbDialogButtons&&$cache.rbDialogButtons.remove(),$(".dialog_content").append($('<div class="dialog_buttons"></div>')),$cache.rbDialogButtons=$(".dialog_buttons"),$.each(e,function(e,t){var a,o;t=$.isFunction(t)?{click:t,text:e}:t,t=$.extend({type:"button"},t),a=t.click,o={class:"button "+t.classes,text:t.text},delete t.click,delete t.classes,"boolean"==typeof t.text&&delete t.text,$("<button></button>",t).attr("class",o.class).text(o.text).appendTo($cache.rbDialogButtons).on("click",function(){a.apply($cache.rbDialog,arguments[0])})}))}function n(e){var t=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];return $(e).find(t.join(","))}function i(e,t){var a=n(e),o=a.index($(document.activeElement));t.shiftKey&&0===o?(a[a.length-1].focus(),t.preventDefault()):t.shiftKey||o!==a.length-1||(a[0].focus(),t.preventDefault())}function l(e){var t=n(e);t.length&&t[0].focus()}function c(e){var t=!$cache.rbDialog[0].hasAttribute("aria-hidden");t&&27===e.which&&(e.preventDefault(),d()),t&&9===e.which&&i($cache.rbDialog,e)}function s(e){var t;e&&(e.target?t=e.target:e.srcElement&&(t=e.srcElement)),$cache.rbDialog[0].hasAttribute("aria-hidden")||$cache.rbDialog[0].contains(t)||l($cache.rbDialog)}function r(){$cache.appendTo.hasClass("is-dialog-open")||($cache.appendTo.addClass("is-dialog-open"),$cache.blurElement.addClass("dialog_blur").attr("aria-hidden",!0),$cache.rbDialog.removeAttr("aria-hidden"),h=$(document.activeElement),l($cache.rbDialog[0]),document.body.addEventListener("focus",s,!0),$(document).keydown(c),$cache.rbDialog.trigger("rbDialog:open"),g("open"))}function d(){g("beforeClose"),$cache.rbDialog[0].hasAttribute("aria-hidden")||($cache.appendTo.removeClass("is-dialog-open"),$cache.blurElement.removeClass("dialog_blur").removeAttr("aria-hidden"),$cache.rbDialog.attr("aria-hidden","true"),h&&h.focus(),document.body.removeEventListener("focus",s,!0),document.removeEventListener("keydown",c),$.each(closers,function(e,t){t.removeEventListener("click",d)}),$cache.rbDialog.trigger("rbDialog:close"),g("close"),b())}function b(){document.body.style.animation?$cache.rbDialog.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){setTimeout(u,200)}):setTimeout(u,200)}function u(){$cache.rbDialogButtons&&$cache.rbDialogButtons.remove(),$cache.appendTo.append($cache.rbDialogBody.children("*").detach().hide()),$cache.rbDialogTitle.text(""),p=e()}function g(e,t,a){var o,n,i=p[e];if(a=a||{},t=$.Event(t),t.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=element[0],n=t.originalEvent)for(o in n)o in t||(t[o]=n[o]);return element.trigger(t,a),!($.isFunction(i)&&!1===i.apply(element[0],[t].concat(a))||t.isDefaultPrevented())}var h,p=e();$cache={appendTo:$(p.appendTo),blurElement:$(p.blurElement),rbDialog:$(".dialog").last(),rbDialogTitle:$(".dialog .dialog_title").last(),rbDialogBody:$(".dialog .dialog_body").last()},element=null,closers=$($cache.rbDialog).find("[data-rb-dialog-hide]"),$.fn.rbDialog=function(e){if("string"!=typeof e&&t.call(this,e),"close"===e)d();else if("destroy"===e)b();else if("open"===e||p.autoOpen)r();else{if("options"===e)return p;if("isOpen"===e)return $cache.appendTo.hasClass("is-dialog-open")}return null}});
//# sourceMappingURL=rocketbelt.dialogs.min.js.map
