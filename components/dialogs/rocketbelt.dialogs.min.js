$(function(){var l,n,s={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null,required:!1,headerless:!1},r={appendTo:$(s.appendTo),blurElement:$(s.blurElement),rbDialog:$(".dialog").last(),rbDialogTitle:$(".dialog .dialog_title").last(),rbDialogBody:$(".dialog .dialog_body").last()},d=null,t=$(r.rbDialog).find("[data-rb-dialog-hide]");function g(e){return $(e).find(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","))}function c(e){var t=g(e);t.length&&t[0].focus()}function b(e){var t,o,i,a,l=!r.rbDialog[0].hasAttribute("aria-hidden");l&&!s.required&&27===e.which&&(e.preventDefault(),p()),l&&9===e.which&&(t=r.rbDialog,o=e,i=g(t),a=i.index($(document.activeElement)),o.shiftKey&&0===a?(i[i.length-1].focus(),o.preventDefault()):o.shiftKey||a!==i.length-1||(i[0].focus(),o.preventDefault()))}function u(e){var t;e&&(e.target?t=e.target:e.srcElement&&(t=e.srcElement)),r.rbDialog[0].hasAttribute("aria-hidden")||r.rbDialog[0].contains(t)||c(r.rbDialog)}function p(){f("beforeClose"),r.rbDialog[0].hasAttribute("aria-hidden")||(r.appendTo.removeClass("is-dialog-open"),r.appendTo.css("top","0"),$(window).scrollTop(n),r.blurElement.removeClass("dialog_blur").removeAttr("aria-hidden"),r.rbDialog.attr("aria-hidden","true"),l&&l.focus(),document.body.removeEventListener("focus",u,!0),document.removeEventListener("keydown",b),$.each(t,function(e,t){t.removeEventListener("click",p)}),r.rbDialog.trigger("rbDialog:close"),f("close"),o())}function o(){document.body.style.animation?r.rbDialog.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){setTimeout(e,200)}):setTimeout(e,200)}function e(){r.rbDialogButtons&&r.rbDialogButtons.remove(),r.appendTo.append(r.rbDialogBody.children("*").detach().hide()),r.rbDialogTitle.text(""),s={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null,required:!1,headerless:!1}}function f(e,t,o){var i,a,l=s[e];if(o=o||{},(t=$.Event(t)).type=this?(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase():e,t.target=d[0],a=t.originalEvent)for(i in a)i in t||(t[i]=a[i]);return d.trigger(t,o),!($.isFunction(l)&&!1===l.apply(d[0],[t].concat(o))||t.isDefaultPrevented())}$.fn.rbDialog=function(e){if("string"!=typeof e&&function(e){if(r.appendTo.hasClass("is-dialog-open"))return;d=this.hasOwnProperty("defaultElement")?$(this.defaultElement):this?$(this):$(d);$.extend(!0,s,e),s.required&&(s.classes.rbDialog+=" dialog_required");s.headerless&&(s.classes.rbDialog+=" dialog_headerless");s.appendTo&&(r.appendTo=$(s.appendTo));s.blurElement&&(r.blurElement=$(s.blurElement));s.title&&r.rbDialogTitle.html(s.title);s.classes&&function(){s.classes.rbDialog&&("dialog"!==s.classes.rbDialog?r.rbDialog.attr("class","dialog "+s.classes.rbDialog):r.rbDialog.attr("class","dialog"));s.classes.rbDialogTitle&&r.rbDialogTitle.addClass(s.classes.rbDialogTitle);s.classes.rbDialogBody&&r.rbDialogBody.addClass(s.classes.rbDialogBody)}();0!==s.buttons.length&&function(){var e=s.buttons;if($.isEmptyObject(e)||$.isArray(e)&&!e.length||-1!==s.classes.rbDialog.indexOf("dialog-max"))return;r.rbDialogButtons&&r.rbDialogButtons.remove();$(".dialog_content").append($('<div class="dialog_buttons"></div>')),r.rbDialogButtons=$(".dialog_buttons"),$.each(e,function(e,t){var o,i;t=$.isFunction(t)?{click:t,text:e}:t,t=$.extend({type:"button"},t),o=t.click,i={class:"button "+t.classes,text:t.text},delete t.click,delete t.classes,"boolean"==typeof t.text&&delete t.text,$("<button></button>",t).attr("class",i.class).text(i.text).appendTo(r.rbDialogButtons).on("click",function(){o.apply(r.rbDialog,arguments[0])})})}();r.rbDialog.data("options",s),$.each(t,function(e,t){s.required&&$(t).is(".dialog_overlay, .dialog_close")||t.addEventListener("click",p)}),$.contains(r.rbDialogBody[0],d[0])||r.rbDialogBody.append(d);d.show()}.call(this,e),"close"===e)p();else if("destroy"===e)o();else if("open"===e||s.autoOpen)!function(){if(r.appendTo.hasClass("is-dialog-open"))return;n=$(window).scrollTop(),r.appendTo.css("top","-"+n+"px"),r.appendTo.addClass("is-dialog-open"),r.blurElement.addClass("dialog_blur").attr("aria-hidden",!0),r.rbDialog.removeAttr("aria-hidden"),l=$(document.activeElement),c(r.rbDialog[0]),document.body.addEventListener("focus",u,!0),$(document).keydown(b);var e=$(r.rbDialog[0]),t=e.find(".dialog_footer");if(0<t.length){t.detach();var o=e.find(".dialog_body");t.insertAfter(o)}if(r.rbDialog[0]&&r.rbDialog[0].classList&&r.rbDialog[0].classList.contains("dialog_headerless")){var i=$(".dialog_headerless .dialog_close_container").detach(),a=$(".dialog_headerless .dialog_content");a.children(".dialog_close_container").length||i.insertAfter(".dialog_headerless .dialog_content .dialog_header")}r.rbDialog.trigger("rbDialog:open"),f("open")}();else{if("options"===e)return s;if("isOpen"===e)return r.appendTo.hasClass("is-dialog-open")}return null}});
//# sourceMappingURL=rocketbelt.dialogs.min.js.map
