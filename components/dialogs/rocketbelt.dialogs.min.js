$(function(){function e(e){b.appendTo.hasClass("is-dialog-open")||(u=this.hasOwnProperty("defaultElement")?$(this.defaultElement):this?$(this):$(u),$.extend(!0,c,e),c.required&&(c.classes.rbDialog+=" dialog_required"),c.headerless&&(c.classes.rbDialog+=" dialog_headerless"),c.appendTo&&(b.appendTo=$(c.appendTo)),c.blurElement&&(b.blurElement=$(c.blurElement)),c.title&&b.rbDialogTitle.html(c.title),c.classes&&function(){c.classes.rbDialog&&("dialog"!==c.classes.rbDialog?b.rbDialog.attr("class","dialog "+c.classes.rbDialog):b.rbDialog.attr("class","dialog"));c.classes.rbDialogTitle&&b.rbDialogTitle.addClass(c.classes.rbDialogTitle);c.classes.rbDialogBody&&b.rbDialogBody.addClass(c.classes.rbDialogBody)}(),0!==c.buttons.length&&function(){var e=c.buttons;if($.isEmptyObject(e)||$.isArray(e)&&!e.length||-1!==c.classes.rbDialog.indexOf("dialog-max"))return;b.rbDialogButtons&&b.rbDialogButtons.remove();$(".dialog_content").append($('<div class="dialog_buttons"></div>')),b.rbDialogButtons=$(".dialog_buttons"),$.each(e,function(e,t){var o,i;t=$.isFunction(t)?{click:t,text:e}:t,t=$.extend({type:"button"},t),o=t.click,i={class:"button "+t.classes,text:t.text},delete t.click,delete t.classes,"boolean"==typeof t.text&&delete t.text,$("<button></button>",t).attr("class",i.class).text(i.text).appendTo(b.rbDialogButtons).on("click",function(){o.apply(b.rbDialog,arguments[0])})})}(),b.rbDialog.data("options",c),$.each(p,function(e,t){c.required&&$(t).is(".dialog_overlay, .dialog_close")||t.addEventListener("click",l)}),$.contains(b.rbDialogBody[0],u[0])||b.rbDialogBody.append(u),u.show())}function t(e){return $(e).find(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","))}function o(e){var o=t(e);o.length&&o[0].focus()}function i(e){var o=!b.rbDialog[0].hasAttribute("aria-hidden");o&&!c.required&&27===e.which&&(e.preventDefault(),l()),o&&9===e.which&&function(e,o){var i=t(e),a=i.index($(document.activeElement));o.shiftKey&&0===a?(i[i.length-1].focus(),o.preventDefault()):o.shiftKey||a!==i.length-1||(i[0].focus(),o.preventDefault())}(b.rbDialog,e)}function a(e){var t;e&&(e.target?t=e.target:e.srcElement&&(t=e.srcElement)),b.rbDialog[0].hasAttribute("aria-hidden")||b.rbDialog[0].contains(t)||o(b.rbDialog)}function l(){r("beforeClose"),b.rbDialog[0].hasAttribute("aria-hidden")||(b.appendTo.removeClass("is-dialog-open"),b.appendTo.css("top","0"),$(window).scrollTop(g),b.blurElement.removeClass("dialog_blur").removeAttr("aria-hidden"),b.rbDialog.attr("aria-hidden","true"),d&&d.focus(),document.body.removeEventListener("focus",a,!0),document.removeEventListener("keydown",i),$.each(p,function(e,t){t.removeEventListener("click",l)}),b.rbDialog.trigger("rbDialog:close"),r("close"),n())}function n(){document.body.style.animation?b.rbDialog.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){setTimeout(s,200)}):setTimeout(s,200)}function s(){b.rbDialogButtons&&b.rbDialogButtons.remove(),b.appendTo.append(b.rbDialogBody.children("*").detach().hide()),b.rbDialogTitle.text(""),c={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null,required:!1,headerless:!1}}function r(e,t,o){var i,a,l=c[e];if(o=o||{},t=$.Event(t),t.type=this?(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase():e,t.target=u[0],a=t.originalEvent)for(i in a)i in t||(t[i]=a[i]);return u.trigger(t,o),!($.isFunction(l)&&!1===l.apply(u[0],[t].concat(o))||t.isDefaultPrevented())}var d,g,c={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null,required:!1,headerless:!1},b={appendTo:$(c.appendTo),blurElement:$(c.blurElement),rbDialog:$(".dialog").last(),rbDialogTitle:$(".dialog .dialog_title").last(),rbDialogBody:$(".dialog .dialog_body").last()},u=null,p=$(b.rbDialog).find("[data-rb-dialog-hide]");$.fn.rbDialog=function(t){if("string"!=typeof t&&e.call(this,t),"close"===t)l();else if("destroy"===t)n();else if("open"===t||c.autoOpen)!function(){if(!b.appendTo.hasClass("is-dialog-open")){if(g=$(window).scrollTop(),b.appendTo.css("top","-"+g+"px"),b.appendTo.addClass("is-dialog-open"),b.blurElement.addClass("dialog_blur").attr("aria-hidden",!0),b.rbDialog.removeAttr("aria-hidden"),d=$(document.activeElement),o(b.rbDialog[0]),document.body.addEventListener("focus",a,!0),$(document).keydown(i),b.rbDialog[0].classList.contains("dialog_headerless")){var e=$(".dialog_headerless .dialog_close_container").detach();$(".dialog_headerless .dialog_content").children(".dialog_close_container").length||e.insertAfter(".dialog_headerless .dialog_content .dialog_header")}b.rbDialog.trigger("rbDialog:open"),r("open")}}();else{if("options"===t)return c;if("isOpen"===t)return b.appendTo.hasClass("is-dialog-open")}return null}});
//# sourceMappingURL=rocketbelt.dialogs.min.js.map
