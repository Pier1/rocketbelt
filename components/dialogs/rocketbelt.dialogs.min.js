$(function(){var o,i,n={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null,required:!1,headerless:!1},s={appendTo:$(n.appendTo),blurElement:$(n.blurElement),rbDialog:$(".dialog").last(),rbDialogTitle:$(".dialog .dialog_title").last(),rbDialogBody:$(".dialog .dialog_body").last()},r=null,t=$(s.rbDialog).find("[data-rb-dialog-hide]");function d(e){return $(e).find(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","))}function a(e){var t=d(e);t.length&&t[0].focus()}function l(e){var t,o,i,a,l=!s.rbDialog[0].hasAttribute("aria-hidden");l&&!n.required&&27===e.which&&(e.preventDefault(),c()),l&&9===e.which&&(t=s.rbDialog,o=e,i=d(t),a=i.index($(document.activeElement)),o.shiftKey&&0===a?(i[i.length-1].focus(),o.preventDefault()):o.shiftKey||a!==i.length-1||(i[0].focus(),o.preventDefault()))}function g(e){var t;e&&(e.target?t=e.target:e.srcElement&&(t=e.srcElement)),s.rbDialog[0].hasAttribute("aria-hidden")||s.rbDialog[0].contains(t)||a(s.rbDialog)}function c(){u("beforeClose"),s.rbDialog[0].hasAttribute("aria-hidden")||(s.appendTo.removeClass("is-dialog-open"),s.appendTo.css("top","0"),$(window).scrollTop(i),s.blurElement.removeClass("dialog_blur").removeAttr("aria-hidden"),s.rbDialog.attr("aria-hidden","true"),o&&o.focus(),document.body.removeEventListener("focus",g,!0),document.removeEventListener("keydown",l),$.each(t,function(e,t){t.removeEventListener("click",c)}),s.rbDialog.trigger("rbDialog:close"),u("close"),b())}function b(){document.body.style.animation?s.rbDialog.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){setTimeout(e,200)}):setTimeout(e,200)}function e(){s.rbDialogButtons&&s.rbDialogButtons.remove(),s.appendTo.append(s.rbDialogBody.children("*").detach().hide()),s.rbDialogTitle.text(""),n={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null,required:!1,headerless:!1}}function u(e,t,o){var i,a,l=n[e];if(o=o||{},(t=$.Event(t)).type=this?(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase():e,t.target=r[0],a=t.originalEvent)for(i in a)i in t||(t[i]=a[i]);return r.trigger(t,o),!($.isFunction(l)&&!1===l.apply(r[0],[t].concat(o))||t.isDefaultPrevented())}$.fn.rbDialog=function(e){if("string"!=typeof e&&function(e){if(s.appendTo.hasClass("is-dialog-open"))return;r=this.hasOwnProperty("defaultElement")?$(this.defaultElement):this?$(this):$(r);$.extend(!0,n,e),n.required&&(n.classes.rbDialog+=" dialog_required");n.headerless&&(n.classes.rbDialog+=" dialog_headerless");n.appendTo&&(s.appendTo=$(n.appendTo));n.blurElement&&(s.blurElement=$(n.blurElement));n.title&&s.rbDialogTitle.html(n.title);n.classes&&function(){n.classes.rbDialog&&("dialog"!==n.classes.rbDialog?s.rbDialog.attr("class","dialog "+n.classes.rbDialog):s.rbDialog.attr("class","dialog"));n.classes.rbDialogTitle&&s.rbDialogTitle.addClass(n.classes.rbDialogTitle);n.classes.rbDialogBody&&s.rbDialogBody.addClass(n.classes.rbDialogBody)}();0!==n.buttons.length&&function(){var e=n.buttons;if($.isEmptyObject(e)||$.isArray(e)&&!e.length||-1!==n.classes.rbDialog.indexOf("dialog-max"))return;s.rbDialogButtons&&s.rbDialogButtons.remove();$(".dialog_content").append($('<div class="dialog_buttons"></div>')),s.rbDialogButtons=$(".dialog_buttons"),$.each(e,function(e,t){var o,i;t=$.isFunction(t)?{click:t,text:e}:t,t=$.extend({type:"button"},t),o=t.click,i={class:"button "+t.classes,text:t.text},delete t.click,delete t.classes,"boolean"==typeof t.text&&delete t.text,$("<button></button>",t).attr("class",i.class).text(i.text).appendTo(s.rbDialogButtons).on("click",function(){o.apply(s.rbDialog,arguments[0])})})}();s.rbDialog.data("options",n),$.each(t,function(e,t){n.required&&$(t).is(".dialog_overlay, .dialog_close")||t.addEventListener("click",c)}),$.contains(s.rbDialogBody[0],r[0])||s.rbDialogBody.append(r);r.show()}.call(this,e),"close"===e)c();else if("destroy"===e)b();else if("open"===e||n.autoOpen)!function(){if(s.appendTo.hasClass("is-dialog-open"))return;if(i=$(window).scrollTop(),s.appendTo.css("top","-"+i+"px"),s.appendTo.addClass("is-dialog-open"),s.blurElement.addClass("dialog_blur").attr("aria-hidden",!0),s.rbDialog.removeAttr("aria-hidden"),o=$(document.activeElement),a(s.rbDialog[0]),document.body.addEventListener("focus",g,!0),$(document).keydown(l),s.rbDialog[0].classList.contains("dialog_headerless")){var e=$(".dialog_headerless .dialog_close_container").detach(),t=$(".dialog_headerless .dialog_content");t.children(".dialog_close_container").length||e.insertAfter(".dialog_headerless .dialog_content .dialog_header")}s.rbDialog.trigger("rbDialog:open"),u("open")}();else{if("options"===e)return n;if("isOpen"===e)return s.appendTo.hasClass("is-dialog-open")}return null}});
//# sourceMappingURL=rocketbelt.dialogs.min.js.map
