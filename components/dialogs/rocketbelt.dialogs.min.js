$(function(){var a,l,n={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null,required:!1,headerless:!1},r={appendTo:$(n.appendTo),blurElement:$(n.blurElement),rbDialog:$(".dialog").last(),rbDialogTitle:$(".dialog .dialog_title").last(),rbDialogBody:$(".dialog .dialog_body").last()},s=null,t=$(r.rbDialog).find("[data-rb-dialog-hide]");function d(e){return $(e).find(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","))}function g(e){var t=d(e);t.length&&t[0].focus()}function c(e){var t=!r.rbDialog[0].hasAttribute("aria-hidden");t&&!n.required&&27===e.which&&(e.preventDefault(),i()),t&&9===e.which&&function(e,t){var i=d(e),o=i.index($(document.activeElement));t.shiftKey&&0===o?(i[i.length-1].focus(),t.preventDefault()):t.shiftKey||o!==i.length-1||(i[0].focus(),t.preventDefault())}(r.rbDialog,e)}function b(e){var t;e&&(e.target?t=e.target:e.srcElement&&(t=e.srcElement)),r.rbDialog[0].hasAttribute("aria-hidden")||r.rbDialog[0].contains(t)||g(r.rbDialog)}$.fn.rbDialog=function(e){if("string"!=typeof e&&function(e){if(r.appendTo.hasClass("is-dialog-open"))return;s=this.hasOwnProperty("defaultElement")?$(this.defaultElement):this?$(this):$(s);$.extend(!0,n,e),n.required&&(n.classes.rbDialog+=" dialog_required");n.headerless&&(n.classes.rbDialog+=" dialog_headerless");n.appendTo&&(r.appendTo=$(n.appendTo));n.blurElement&&(r.blurElement=$(n.blurElement));n.title&&r.rbDialogTitle.html(n.title);n.classes&&function(){n.classes.rbDialog&&("dialog"!==n.classes.rbDialog?r.rbDialog.attr("class","dialog "+n.classes.rbDialog):r.rbDialog.attr("class","dialog"));n.classes.rbDialogTitle&&r.rbDialogTitle.addClass(n.classes.rbDialogTitle);n.classes.rbDialogBody&&r.rbDialogBody.addClass(n.classes.rbDialogBody)}();0!==n.buttons.length&&function(){var a=n.buttons;if($.isEmptyObject(a)||$.isArray(a)&&!a.length||-1!==n.classes.rbDialog.indexOf("dialog-max"))return;r.rbDialogButtons&&r.rbDialogButtons.remove();$(".dialog_content").append($('<div class="dialog_buttons"></div>')),r.rbDialogButtons=$(".dialog_buttons"),$.each(a,function(e,t){var i,o;t=$.isFunction(t)?{click:t,text:e}:t,t=$.extend({type:"button"},t),1===a.length&&(!t.classes||t.classes&&0<t.classes.length&&-1<!t.classes.indexOf("button-primary"))&&(t.classes=t.classes+" button-primary"),i=t.click,o={class:"button "+t.classes,text:t.text},delete t.click,delete t.classes,"boolean"==typeof t.text&&delete t.text,$("<button></button>",t).attr("class",o.class).text(o.text).appendTo(r.rbDialogButtons).on("click",function(){i.apply(r.rbDialog,arguments[0])})})}();r.rbDialog.data("options",n),$.each(t,function(e,t){$(t).is(".dialog_close")&&$(t).addClass("button button-minimal"),n.required&&$(t).is(".dialog_overlay, .dialog_close")||t.addEventListener("click",i)}),$.contains(r.rbDialogBody[0],s[0])||r.rbDialogBody.append(s);s.show()}.call(this,e),"close"===e)i();else if("destroy"===e)o();else if("open"===e||n.autoOpen)!function(){if(r.appendTo.hasClass("is-dialog-open"))return;$(r.rbDialog[0]).find(".dialog_content").removeAttr("style"),l=$(window).scrollTop(),r.appendTo.css("top","-"+l+"px"),r.appendTo.addClass("is-dialog-open"),r.blurElement.addClass("dialog_blur").attr("aria-hidden",!0),r.rbDialog.removeAttr("aria-hidden"),a=$(document.activeElement),g(r.rbDialog[0]),document.body.addEventListener("focus",b,!0),$(document).keydown(c);var e=$(r.rbDialog[0]),t=e.find(".dialog_footer");if(0<t.length){t.detach();var i=e.find(".dialog_body");t.insertAfter(i)}if(r.rbDialog[0]&&r.rbDialog[0].classList&&r.rbDialog[0].classList.contains("dialog_headerless")){var o=$(".dialog_headerless .dialog_close_container").detach();$(".dialog_headerless .dialog_content").children(".dialog_close_container").length||o.insertAfter(".dialog_headerless .dialog_content .dialog_header")}window.devicePixelRatio<2&&(rb.onAnimationEnd(r.rbDialog[0],function(e){return u(e.target)},!0),window.addEventListener("rb.optimizedResize",u));r.rbDialog.trigger("rbDialog:open"),p("open")}();else{if("options"===e)return n;if("isOpen"===e)return r.appendTo.hasClass("is-dialog-open")}return null};var u=function(e){var t=$(r.rbDialog[0]).find(".dialog_content"),i=(t.position(),t.width()),o=$(window),a=o.height(),l=o.width(),n=(a-t.height())/2,s=(l-t.width())/2;t.css({transform:"none",position:"fixed",top:Math.round(n),left:Math.round(s),width:i})};function i(){p("beforeClose"),window.devicePixelRatio<2&&(window.removeEventListener("rb.optimizedResize",u),$(r.rbDialog[0]).find(".dialog_content").css({transform:"translate(-50%, -50%)",top:"50%",left:"50%"}));r.rbDialog[0].hasAttribute("aria-hidden")||(r.appendTo.removeClass("is-dialog-open"),r.appendTo.css("top","0"),$(window).scrollTop(l),r.blurElement.removeClass("dialog_blur").removeAttr("aria-hidden"),r.rbDialog.attr("aria-hidden","true"),a&&a.focus(),document.body.removeEventListener("focus",b,!0),document.removeEventListener("keydown",c),$.each(t,function(e,t){t.removeEventListener("click",i)}),r.rbDialog.trigger("rbDialog:close"),p("close"),o())}function o(){document.body.style.animation?r.rbDialog.one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){setTimeout(e,200)}):setTimeout(e,200)}function e(){r.rbDialogButtons&&r.rbDialogButtons.remove(),r.appendTo.append(r.rbDialogBody.children("*").detach().hide()),r.rbDialogTitle.text(""),n={appendTo:"body",blurElement:"body>div:first",autoOpen:!0,buttons:[],classes:{rbDialog:"dialog",rbDialogTitle:"dialog_title",rbDialogBody:"dialog_body"},title:null,beforeClose:null,close:null,open:null,required:!1,headerless:!1}}function p(e,t,i){var o,a,l=n[e];if(i=i||{},(t=$.Event(t)).type=this?(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase():e,t.target=s[0],a=t.originalEvent)for(o in a)o in t||(t[o]=a[o]);return s.trigger(t,i),!($.isFunction(l)&&!1===l.apply(s[0],[t].concat(i))||t.isDefaultPrevented())}});
//# sourceMappingURL=rocketbelt.dialogs.min.js.map
