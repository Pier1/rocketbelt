{"version":3,"sources":["components/dialogs/rocketbelt.dialogs.min.js"],"names":["$","focusedBeforeDialog","scrollBeforeDialog","options","appendTo","blurElement","autoOpen","buttons","classes","rbDialog","rbDialogTitle","rbDialogBody","title","beforeClose","close","open","required","headerless","$cache","last","element","closers","find","getFocusableChildren","node","focusableChildren","focusedItemIndex","length","focus","bindKeypress","event","shown","hasAttribute","which","maintainFocus","target","preventDefault","index","document","activeElement","setFocusToFirstItem","shiftKey","trapTabKey","srcElement","removeAttr","contains","fn","params","hasClass","this","hasOwnProperty","extend","addDialogButtons","data","html","each","attr","addClass","addDialogClasses","is","isEmptyObject","isArray","indexOf","rbDialogButtons","remove","append","buttonOptions","name","props","click","text","type","class","apply","focusableElements","on","arguments","el","addEventListener","call","destroy","css","$footer","$dialog","$body","insertAfter","$headerlessDialog","detach","$closeContainer","window","devicePixelRatio","rb","onAnimationEnd","recenterDialog","children","e","position","$window","height","width","init","dialog","left","_trigger","win","removeEventListener","transform","top","Math","round","scrollTop","removeClass","trigger","animation","value","initOptions","one","setTimeout","destroyTheWorld","widgetEventPrefix","orig","callback","prop","toLowerCase","isFunction","originalEvent","concat","isDefaultPrevented"],"mappings":"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","file":"rocketbelt.dialogs.min.js","sourcesContent":["/* global $cache:true element:true closers:true */\n$(function () {\n  var options = initOptions();\n  var focusedBeforeDialog;\n  var scrollBeforeDialog;\n  // IE doesn't apply append var to the global scope.\n  var $cache = {\n    appendTo: $(options.appendTo),\n    blurElement: $(options.blurElement),\n    rbDialog: $('.dialog').last(),\n    rbDialogTitle: $('.dialog .dialog_title').last(),\n    rbDialogBody: $('.dialog .dialog_body').last()\n  };\n  var element = null;\n  var closers = $($cache.rbDialog).find('[data-rb-dialog-hide]');\n\n  function initOptions() {\n    return {\n      appendTo: 'body',\n      blurElement: 'body>div:first',\n      autoOpen: true,\n      buttons: [],\n      classes: {\n        'rbDialog': 'dialog',\n        'rbDialogTitle': 'dialog_title',\n        'rbDialogBody': 'dialog_body'\n      },\n      title: null,\n      beforeClose: null,\n      close: null,\n      open: null,\n      required: false,\n      headerless: false\n    };\n  }\n\n  /**\n   * rbDialog constructor\n   * @param {Object|string} [params] - Either the options object or function call as a string\n   * @returns {undefined} Returns undefined\n   * @description Pops a Rocketbelt modal\n   */\n  $.fn.rbDialog = function (params) {\n    if (typeof params !== 'string') init.call(this, params);\n    if (params === 'close') close();\n    else if (params === 'destroy') destroy();\n    else if (params === 'open' || options.autoOpen) open();\n    else if (params === 'options') return options;\n    else if (params === 'isOpen') return $cache.appendTo.hasClass('is-dialog-open');\n    return null;\n  };\n\n  function init(params) {\n    if ($cache.appendTo.hasClass('is-dialog-open')) return;\n    if (this.hasOwnProperty('defaultElement')) {\n      element = $(this.defaultElement);\n    } else if (this) {\n      element = $(this);\n    } else {\n      element = $(element);\n    }\n\n    $.extend(true, options, params);\n\n    if (options.required) options.classes['rbDialog'] += ' dialog_required';\n\n    if (options.headerless) {\n      options.classes['rbDialog'] += ' dialog_headerless';\n    }\n\n    if (options.appendTo) $cache.appendTo = $(options.appendTo);\n    if (options.blurElement) $cache.blurElement = $(options.blurElement);\n    if (options.title) $cache.rbDialogTitle.html(options.title);\n    if (options.classes) addDialogClasses();\n    if (options.buttons.length !== 0) addDialogButtons();\n\n    $cache.rbDialog.data('options', options);\n    $.each(closers, function (index, el) {\n      if ($(el).is('.dialog_close')) {\n        $(el).addClass('button button-minimal');\n      }\n\n      if ( options.required && $(el).is('.dialog_overlay, .dialog_close') ) return;\n\n      el.addEventListener('click', close);\n    });\n    if (!$.contains($cache.rbDialogBody[0], element[0])) {\n      $cache.rbDialogBody.append(element);\n    }\n    element.show();\n  }\n\n  function addDialogClasses() {\n    if (options.classes.rbDialog) {\n      if (options.classes.rbDialog !== 'dialog') $cache.rbDialog.attr('class', 'dialog ' + options.classes.rbDialog);\n      else $cache.rbDialog.attr('class', 'dialog');\n    }\n    if (options.classes.rbDialogTitle) $cache.rbDialogTitle.addClass(options.classes.rbDialogTitle);\n    if (options.classes.rbDialogBody) $cache.rbDialogBody.addClass(options.classes.rbDialogBody);\n  }\n\n  function addDialogButtons() {\n    var buttons = options.buttons;\n\n    // If we already have a button pane, remove it\n\n    if ($.isEmptyObject(buttons) || ($.isArray(buttons) && !buttons.length) || (options.classes.rbDialog.indexOf('dialog-max') !== -1)) {\n      return;\n    }\n\n    if ($cache.rbDialogButtons) $cache.rbDialogButtons.remove();\n    $('.dialog_content').append($('<div class=\"dialog_buttons\"></div>'));\n    $cache.rbDialogButtons = $('.dialog_buttons');\n\n    $.each(buttons, function (name, props) {\n\n      var click;\n      var buttonOptions;\n      props = $.isFunction(props) ? { click: props, text: name } : props;\n\n      // Default to a non-submitting button\n      props = $.extend({ type: 'button' }, props);\n\n      if (buttons.length === 1) {\n        // Button is implicitly primary if there's only one button.\n        if (!props.classes || (props.classes && props.classes.length > 0 && !props.classes.indexOf('button-primary') > -1)) {\n          props.classes = props.classes + ' button-primary';\n        }\n      }\n      // Change the context for the click callback to be the main element\n      click = props.click;\n      buttonOptions = {\n        class: 'button ' + props.classes,\n        text: props.text\n      };\n\n      delete props.click;\n      delete props.classes;\n      if (typeof props.text === 'boolean') {\n        delete props.text;\n      }\n\n      $('<button></button>', props)\n        .attr('class', buttonOptions.class)\n        .text(buttonOptions.text)\n        .appendTo($cache.rbDialogButtons)\n        .on('click', function () {\n          click.apply($cache.rbDialog, arguments[0]);\n        });\n    });\n  }\n\n  function getFocusableChildren(node) {\n    var focusableElements = ['a[href]', 'area[href]', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])', 'button:not([disabled])', 'iframe', 'object', 'embed', '[contenteditable]', '[tabindex]:not([tabindex^=\"-\"])'];\n    return $(node).find(focusableElements.join(','));\n  }\n\n  // Helper function trapping the tab key inside a node\n  function trapTabKey(node, event) {\n    var focusableChildren = getFocusableChildren(node);\n    var focusedItemIndex = focusableChildren.index($(document.activeElement));\n\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableChildren[focusableChildren.length - 1].focus();\n      event.preventDefault();\n    } else if (!event.shiftKey && focusedItemIndex === focusableChildren.length - 1) {\n      focusableChildren[0].focus();\n      event.preventDefault();\n    }\n  }\n\n  function setFocusToFirstItem(node) {\n    var focusableChildren = getFocusableChildren(node);\n    if (focusableChildren.length) focusableChildren[0].focus();\n  }\n\n  function bindKeypress(event) {\n    var shown = !$cache.rbDialog[0].hasAttribute('aria-hidden');\n    if (shown && !options.required && event.which === 27) {\n      event.preventDefault();\n      close();\n    }\n\n    if (shown && event.which === 9) {\n      trapTabKey($cache.rbDialog, event);\n    }\n  }\n\n  function maintainFocus(event) {\n    var target;\n    if (event) {\n      if (event.target) {\n        target = event.target;\n      } else if (event.srcElement) {\n        target = event.srcElement;\n      }\n    }\n\n    if (!$cache.rbDialog[0].hasAttribute('aria-hidden') && !$cache.rbDialog[0].contains(target)) {\n      setFocusToFirstItem($cache.rbDialog);\n    }\n  }\n\n  function open() {\n    if ($cache.appendTo.hasClass('is-dialog-open')) return;\n\n    const $d = $($cache.rbDialog[0]).find('.dialog_content');\n    $d.removeAttr('style');\n\n    // Preserve scroll position\n    scrollBeforeDialog = $(window).scrollTop();\n    $cache.appendTo.css('top', '-' + scrollBeforeDialog + 'px');\n\n    $cache.appendTo.addClass('is-dialog-open');\n    $cache.blurElement.addClass('dialog_blur').attr('aria-hidden', true);\n    $cache.rbDialog.removeAttr('aria-hidden');\n    focusedBeforeDialog = $(document.activeElement);\n    setFocusToFirstItem($cache.rbDialog[0]);\n    document.body.addEventListener('focus', maintainFocus, true);\n    $(document).keydown(bindKeypress);\n\n    var $dialog = $($cache.rbDialog[0]);\n    var $footer = $dialog.find('.dialog_footer');\n\n    if ($footer.length > 0) {\n      $footer.detach();\n\n      const $body = $dialog.find('.dialog_body');\n      $footer.insertAfter($body);\n    }\n\n    if ($cache.rbDialog[0] &&\n        $cache.rbDialog[0].classList &&\n        $cache.rbDialog[0].classList.contains('dialog_headerless')) {\n      var $closeContainer = $('.dialog_headerless .dialog_close_container').detach();\n      var $headerlessDialog = $('.dialog_headerless .dialog_content');\n\n      if (!$headerlessDialog.children('.dialog_close_container').length) {\n        $closeContainer.insertAfter('.dialog_headerless .dialog_content .dialog_header');\n      }\n    }\n\n    if (window.devicePixelRatio < 2) {\n      rb.onAnimationEnd(\n        $cache.rbDialog[0],\n        (e) => recenterDialog(e.target),\n        true\n      );\n\n      window.addEventListener('rb.optimizedResize', recenterDialog);\n    }\n\n    $cache.rbDialog.trigger('rbDialog:open');\n    _trigger('open');\n  }\n\n  const recenterDialog = (el) => {\n    const $dialog = $($cache.rbDialog[0]).find('.dialog_content');\n\n    const position = $dialog.position();\n    const width = $dialog.width();\n\n    const $window = $(window);\n\n    const win = {\n      height: $window.height(),\n      width: $window.width()\n    };\n\n    const dialog = {\n      height: $dialog.height(),\n      width: $dialog.width()\n    }\n\n    const top = (win.height - dialog.height) / 2\n    const left = (win.width - dialog.width) / 2\n\n    $dialog.css({\n      'transform': 'none',\n      'position': 'fixed',\n      'top': Math.round(top),\n      'left': Math.round(left),\n      'width': width\n    });\n  };\n\n  function close() {\n    _trigger('beforeClose');\n\n    if (window.devicePixelRatio < 2) {\n      window.removeEventListener('rb.optimizedResize', recenterDialog);\n\n      const $dialog = $($cache.rbDialog[0]).find('.dialog_content');\n\n      $dialog.css({\n        'transform': 'translate(-50%, -50%)',\n        'top': '50%',\n        'left': '50%'\n      });\n    }\n\n    if ($cache.rbDialog[0].hasAttribute('aria-hidden')) return;\n\n    $cache.appendTo.removeClass('is-dialog-open');\n\n    // Preserve scroll position\n    $cache.appendTo.css('top', '0');\n    $(window).scrollTop(scrollBeforeDialog);\n\n    $cache.blurElement.removeClass('dialog_blur').removeAttr('aria-hidden');\n    $cache.rbDialog.attr('aria-hidden', 'true');\n    focusedBeforeDialog && focusedBeforeDialog.focus();\n    document.body.removeEventListener('focus', maintainFocus, true);\n    document.removeEventListener('keydown', bindKeypress);\n\n    // Remove closing\n    $.each(closers, function (index, value) {\n      value.removeEventListener('click', close);\n    });\n\n    $cache.rbDialog.trigger('rbDialog:close');\n    _trigger('close');\n    destroy();\n  }\n\n  function destroy() {\n    if (document.body.style.animation) {\n      $cache.rbDialog.one('webkitAnimationEnd oanimationend msAnimationEnd animationend', function () {\n        setTimeout(destroyTheWorld, 200);\n      });\n    } else {\n      setTimeout(destroyTheWorld, 200);\n    }\n  }\n\n  function destroyTheWorld() {\n    if ($cache.rbDialogButtons) $cache.rbDialogButtons.remove();\n    $cache.appendTo.append($cache.rbDialogBody.children('*').detach().hide());\n    $cache.rbDialogTitle.text('');\n    options = initOptions();\n  }\n\n  function _trigger(type, event, data) {\n    var prop;\n    var orig;\n    var callback = options[type];\n\n    data = data || {};\n    event = $.Event(event);\n    if (this) {\n      event.type = (type === this.widgetEventPrefix ? type : this.widgetEventPrefix + type).toLowerCase();\n    } else {\n      event.type = type;\n    }\n    // the original event may come from any element\n    // so we need to reset the target on the new event\n    event.target = element[0];\n\n    // copy original event properties over to the new event\n    orig = event.originalEvent;\n    if (orig) {\n      for (prop in orig) {\n        if (!(prop in event)) {\n          event[prop] = orig[prop];\n        }\n      }\n    }\n\n    element.trigger(event, data);\n    return !($.isFunction(callback) && callback.apply(element[0], [event].concat(data)) === false || event.isDefaultPrevented());\n  }\n});\n"],"sourceRoot":"../.."}