{"version":3,"sources":["components/tabcordions/rocketbelt.tabcordions.min.js"],"names":["$","findAdjacentTab","startTab","$list","key","dir","keys","ARROW_LEFT","ARROW_UP","adjacentTab","parentNode","prev","next","allTabs","find","length","setActiveAndInactive","newActive","each","assocPanelID","this","first","attr","anchor","removeClass","tabIndex","setAttribute","addClass","removeAttr","determineView","winWidth","window","width","breakpoint","$tabcordion","$panels","$navlist","isStatic","hasClass","isAccordionView","isTabsView","panelID","id","assocLink","append","wasAccordion","$tabcordions","ARROWS","ARROW_RIGHT","ARROW_DOWN","ENTER","SPACE","PAGE_UP","PAGE_DOWN","on","keyVent","which","target","inArray","preventDefault","focus","click","assocPanel","getAttribute","document","body","e","closest","activeTab","sr","debounce","func","threshold","execAsap","timeout","delayed","apply","obj","args","arguments","clearTimeout","setTimeout","jQuery","fn","bind","trigger","smartresize"],"mappings":"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","file":"rocketbelt.tabcordions.min.js","sourcesContent":["(function ($) {\n  var $tabcordions = $('.tabcordion');\n\n  var keys = {\n    ARROWS: [37, 38, 39, 40],\n    ARROW_LEFT: 37,\n    ARROW_UP: 38,\n    ARROW_RIGHT: 39,\n    ARROW_DOWN: 40,\n    ENTER: 13,\n    SPACE: 32,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34\n  };\n\n  $tabcordions.each(function () {\n    var $tabcordion = $(this);\n    var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n    $navlist.on('keydown', '.tabcordion_nav-item .tabcordion_nav-trigger', function (keyVent) {\n      var which = keyVent.which;\n      var target = keyVent.target;\n\n      if ($.inArray(which, keys.ARROWS) > -1) {\n        var adjacentTab = findAdjacentTab(target, $navlist, which);\n\n        if (adjacentTab) {\n          keyVent.preventDefault();\n          adjacentTab.focus();\n\n          setActiveAndInactive(adjacentTab, $navlist);\n        }\n      }\n      else if (which === keys.ENTER || which === keys.SPACE) {\n        keyVent.preventDefault();\n        target.click();\n      }\n      else if (which === keys.PAGE_DOWN) {\n        keyVent.preventDefault();\n        var assocPanel = $('#' + this.getAttribute('aria-controls'));\n\n        if (assocPanel) {\n          assocPanel.focus();\n        }\n      }\n    });\n\n    // Click support\n    $navlist.on('click', '.tabcordion_nav-item .tabcordion_nav-trigger', function () {\n      setActiveAndInactive(this, $navlist);\n    });\n  });\n\n  $(document.body).on('keydown', '.tabcordion_panel', function (e) {\n    if (e.which === keys.PAGE_UP) {\n      e.preventDefault();\n      var $navlist = $(this).closest('.tabcordion').find('.tabcordion_navlist');\n      var activeTab = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n\n      if (activeTab) {\n        activeTab.focus();\n      }\n    }\n  });\n\n  function findAdjacentTab(startTab, $list, key) {\n    var dir = (key === keys.ARROW_LEFT || key === keys.ARROW_UP) ? 'prev' : 'next';\n    var adjacentTab = (dir === 'prev') ?\n                      $(startTab.parentNode).prev()[0] :\n                      $(startTab.parentNode).next()[0];\n\n    if (!adjacentTab) {\n      var allTabs = $list.find('.tabcordion_nav-item');\n      if (dir === 'prev') {\n        adjacentTab = allTabs[allTabs.length - 1];\n      }\n      else {\n        adjacentTab = allTabs[0];\n      }\n    }\n\n    return $(adjacentTab).find('.tabcordion_nav-trigger')[0];\n  }\n\n  function setActiveAndInactive(newActive, $list) {\n    $list.find('.tabcordion_nav-item').each(function () {\n      var assocPanelID = $(this)\n                            .find('.tabcordion_nav-trigger')\n                            .first()\n                            .attr('aria-controls');\n      var anchor = $(this).find('.tabcordion_nav-trigger')[0];\n\n      if (this !== newActive.parentNode) {\n        $(this).removeClass('is-active');\n        anchor.tabIndex = -1;\n        anchor.setAttribute('aria-selected', 'false');\n        $('#' + assocPanelID)\n          .removeClass('is-current')\n          .attr('aria-hidden', 'true');\n      }\n      else {\n        $(this).addClass('is-active');\n        anchor.tabIndex = 0;\n        anchor.setAttribute('aria-selected', 'true');\n        $('#' + assocPanelID)\n          .addClass('is-current')\n          .removeAttr('aria-hidden');\n      }\n    });\n  }\n\n  // Initial configuration based on viewport width\n  determineView();\n\n  // Debounced Resize() jQuery Plugin\n  // Author: Paul Irish\n  (function ($, sr) {\n    // debouncing function from John Hann\n    // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/\n    var debounce = function (func, threshold, execAsap) {\n      var timeout;\n\n      return function debounced() {\n        var obj = this;\n        var args = arguments;\n        function delayed() {\n          if (!execAsap) {\n            func.apply(obj, args);\n          }\n          timeout = null;\n        }\n\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        else if (execAsap) {\n          func.apply(obj, args);\n        }\n\n        timeout = setTimeout(delayed, threshold || 100);\n      };\n    };\n    // smartresize\n    jQuery.fn[sr] = function (fn) { return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };\n  })(jQuery, 'smartresize');\n\n  // Resize event:\n  $(window).smartresize(determineView);\n\n  function determineView() {\n    var winWidth = $(window).width();\n    var breakpoint = 480;\n\n    $('.tabcordion').each(function () {\n      var $tabcordion = $(this);\n      var $panels = $tabcordion.find('.tabcordion_panels');\n      var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n      var isStatic = $tabcordion.hasClass('is-static');\n      var isAccordionView = $tabcordion.hasClass('is-accordion');\n      var isTabsView = !isAccordionView;\n\n      if (!isStatic) {\n        if (winWidth <= breakpoint && !isAccordionView) {\n          // Switch to accordion\n          $tabcordion\n            .removeClass('is-tabs')\n            .addClass('is-accordion');\n\n          // Better markup semantics for accordion\n          $panels.find('.tabcordion_panel').each(function () {\n            var panelID = this.id;\n            var assocLink = panelID && $('.tabcordion_navlist .tabcordion_nav-trigger[aria-controls=\"' + panelID + '\"]')[0];\n            if (assocLink) {\n              $(assocLink.parentNode).append(this);\n            }\n          });\n        }\n        else if (winWidth > breakpoint && !isTabsView) {\n          // Switch to tabs\n          var wasAccordion = $tabcordion.hasClass('is-accordion');\n          $tabcordion\n            .removeClass('is-accordion')\n            .addClass('is-tabs');\n\n          if (wasAccordion) {\n            $navlist.find('.tabcordion_panel').each(function () {\n              $panels.append(this);\n            });\n          }\n        }\n      }\n    });\n  }\n})(jQuery);\n"],"sourceRoot":"../.."}