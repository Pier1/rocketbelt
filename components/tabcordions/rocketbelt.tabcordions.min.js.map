{"version":3,"sources":["components/tabcordions/rocketbelt.tabcordions.min.js"],"names":["$","setActiveAndInactive","newActive","$list","find","each","assocPanelID","this","first","attr","anchor","parentNode","hasClass","closest","removeClass","tabIndex","setAttribute","addClass","removeAttr","determineView","$tabContainer","breakpointOverride","data","breakpoint","$tabcordion","containerWidth","width","$panels","$navlist","isStatic","isAccordionView","isTabsView","panelID","id","assocLink","append","wasAccordion","keys","ARROWS","ARROW_LEFT","ARROW_UP","ARROW_RIGHT","ARROW_DOWN","ENTER","SPACE","PAGE_UP","PAGE_DOWN","on","keyVent","which","target","inArray","adjacentTab","startTab","key","dir","prev","next","allTabs","length","findAdjacentTab","preventDefault","focus","click","assocPanel","getAttribute","currentTarget","eventData","previousTarget","newTarget","event","CustomEvent","detail","dispatchEvent","document","body","e","activeTab","sr","jQuery","fn","bind","func","threshold","execAsap","timeout","obj","args","arguments","clearTimeout","apply","setTimeout","debounce","trigger","window","smartresize"],"mappings":"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","file":"rocketbelt.tabcordions.min.js","sourcesContent":["(function ($) {\n  var $tabcordions = $('.tabcordion');\n\n  var keys = {\n    ARROWS: [37, 38, 39, 40],\n    ARROW_LEFT: 37,\n    ARROW_UP: 38,\n    ARROW_RIGHT: 39,\n    ARROW_DOWN: 40,\n    ENTER: 13,\n    SPACE: 32,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34\n  };\n\n  $tabcordions.each(function () {\n    var $tabcordion = $(this);\n    var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n    $navlist.on('keydown', '.tabcordion_nav-item .tabcordion_nav-trigger', function (keyVent) {\n      var which = keyVent.which;\n      var target = keyVent.target;\n\n      if ($.inArray(which, keys.ARROWS) > -1) {\n        var adjacentTab = findAdjacentTab(target, $navlist, which);\n\n        if (adjacentTab) {\n          keyVent.preventDefault();\n          adjacentTab.focus();\n\n          setActiveAndInactive(adjacentTab, $navlist);\n        }\n      } else if (which === keys.ENTER || which === keys.SPACE) {\n        keyVent.preventDefault();\n        target.click();\n      } else if (which === keys.PAGE_DOWN) {\n        keyVent.preventDefault();\n        var assocPanel = $('#' + this.getAttribute('aria-controls'));\n\n        if (assocPanel) {\n          assocPanel.focus();\n        }\n      }\n    });\n\n    // Click support\n    $navlist.on('click', '.tabcordion_nav-item .tabcordion_nav-trigger', function () {\n      var currentTarget = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n      if (currentTarget != $(this)[0]) {\n        var eventData = {'previousTarget': currentTarget, 'newTarget': $(this)[0]};\n        var event = new CustomEvent('rb.tabcordion.tabChanged', {detail: eventData});\n        $(this)[0].dispatchEvent(event);\n      }\n\n      setActiveAndInactive(this, $navlist);\n    });\n  });\n\n  $(document.body).on('keydown', '.tabcordion_panel', function (e) {\n    if (e.which === keys.PAGE_UP) {\n      e.preventDefault();\n      var $navlist = $(this).closest('.tabcordion').find('.tabcordion_navlist');\n      var activeTab = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n\n      if (activeTab) {\n        activeTab.focus();\n      }\n    }\n  });\n\n  function findAdjacentTab(startTab, $list, key) {\n    var dir = (key === keys.ARROW_LEFT || key === keys.ARROW_UP) ? 'prev' : 'next';\n    var adjacentTab = (dir === 'prev') ?\n                      $(startTab.parentNode).prev()[0] :\n                      $(startTab.parentNode).next()[0];\n\n    if (!adjacentTab) {\n      var allTabs = $list.find('.tabcordion_nav-item');\n      if (dir === 'prev') {\n        adjacentTab = allTabs[allTabs.length - 1];\n      } else {\n        adjacentTab = allTabs[0];\n      }\n    }\n\n    return $(adjacentTab).find('.tabcordion_nav-trigger')[0];\n  }\n\n  function setActiveAndInactive(newActive, $list) {\n    $list.find('.tabcordion_nav-item').each(function () {\n      var assocPanelID = $(this)\n                            .find('.tabcordion_nav-trigger')\n                            .first()\n                            .attr('aria-controls');\n      var anchor = $(this).find('.tabcordion_nav-trigger')[0];\n\n      if (this !== newActive.parentNode ||\n          ($(this).hasClass('is-active') && $(this).closest('.tabcordion').hasClass('is-accordion'))) {\n        $(this).removeClass('is-active');\n        anchor.tabIndex = -1;\n        anchor.setAttribute('aria-selected', 'false');\n        $('#' + assocPanelID)\n          .removeClass('is-current')\n          .attr('aria-hidden', 'true');\n      } else {\n        $(this).addClass('is-active');\n        anchor.tabIndex = 0;\n        anchor.setAttribute('aria-selected', 'true');\n        $('#' + assocPanelID)\n          .addClass('is-current')\n          .removeAttr('aria-hidden');\n      }\n    });\n  }\n\n  // Initial configuration based on viewport width\n  determineView();\n\n  // Debounced Resize() jQuery Plugin\n  // Author: Paul Irish\n  (function ($, sr) {\n    // debouncing function from John Hann\n    // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/\n    var debounce = function (func, threshold, execAsap) {\n      var timeout;\n\n      return function debounced() {\n        var obj = this;\n        var args = arguments;\n        function delayed() {\n          if (!execAsap) {\n            func.apply(obj, args);\n          }\n          timeout = null;\n        }\n\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        else if (execAsap) {\n          func.apply(obj, args);\n        }\n\n        timeout = setTimeout(delayed, threshold || 100);\n      };\n    };\n    // smartresize\n    jQuery.fn[sr] = function (fn) { return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };\n  })(jQuery, 'smartresize');\n\n  // Resize event:\n  $(window).smartresize(determineView);\n\n  function determineView() {\n    var $tabContainer = $('.tabcordion');\n    var breakpointOverride = $tabContainer.data('breakpoint');\n    var breakpoint = breakpointOverride ? breakpointOverride : 480;\n\n    $tabContainer.each(function () {\n      var $tabcordion = $(this);\n      var containerWidth = $tabcordion.width();\n      var $panels = $tabcordion.find('.tabcordion_panels');\n      var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n      var isStatic = $tabcordion.hasClass('is-static');\n      var isAccordionView = $tabcordion.hasClass('is-accordion');\n      var isTabsView = !isAccordionView;\n\n      if (!isStatic) {\n        if (containerWidth <= breakpoint && !isAccordionView) {\n          // Switch to accordion\n          $tabcordion\n            .removeClass('is-tabs')\n            .addClass('is-accordion');\n\n          // Better markup semantics for accordion\n          $panels.find('.tabcordion_panel').each(function () {\n            var panelID = this.id;\n            var assocLink = panelID && $('.tabcordion_navlist .tabcordion_nav-trigger[aria-controls=\"' + panelID + '\"]')[0];\n            if (assocLink) {\n              $(assocLink.parentNode).append(this);\n            }\n          });\n        } else if (containerWidth > breakpoint && !isTabsView) {\n          // Switch to tabs\n          var wasAccordion = $tabcordion.hasClass('is-accordion');\n          $tabcordion\n            .removeClass('is-accordion')\n            .addClass('is-tabs');\n\n          if (wasAccordion) {\n            $navlist.find('.tabcordion_panel').each(function () {\n              $panels.append(this);\n            });\n          }\n        }\n      }\n    });\n  }\n})(jQuery);\n"],"sourceRoot":"../.."}