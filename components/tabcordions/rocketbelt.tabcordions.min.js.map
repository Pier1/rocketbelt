{"version":3,"sources":["components/tabcordions/rocketbelt.tabcordions.min.js"],"names":["$","assocPanelID","newActive","$list","anchor","each","this","parentNode","first","attr","setAttribute","find","addClass","closest","hasClass","tabIndex","removeClass","determineView","removeAttr","$navlist","$tabContainer","breakpointOverride","$tabcordion","data","breakpoint","isAccordionView","containerWidth","$panels","isStatic","isTabsView","panelID","wasAccordion","id","assocLink","append","keys","ARROWS","ARROW_LEFT","ARROW_UP","ARROW_RIGHT","ARROW_DOWN","ENTER","SPACE","PAGE_UP","PAGE_DOWN","on","keyVent","which","target","inArray","adjacentTab","startTab","key","dir","prev","next","allTabs","length","findAdjacentTab","preventDefault","focus","setActiveAndInactive","click","assocPanel","getAttribute","currentTarget","eventData","previousTarget","newTarget","event","CustomEvent","detail","dispatchEvent","document","body","e","activeTab","execAsap","jQuery","timeout","func","threshold","clearTimeout","args","fn","bind","apply","obj","setTimeout","debounce","trigger","sr","window"],"mappings":"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","file":"rocketbelt.tabcordions.min.js","sourcesContent":["(function ($) {\n  var $tabcordions = $('.tabcordion');\n\n  var keys = {\n    ARROWS: [37, 38, 39, 40],\n    ARROW_LEFT: 37,\n    ARROW_UP: 38,\n    ARROW_RIGHT: 39,\n    ARROW_DOWN: 40,\n    ENTER: 13,\n    SPACE: 32,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34\n  };\n\n  $tabcordions.each(function () {\n    var $tabcordion = $(this);\n    var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n    $navlist.on('keydown', '.tabcordion_nav-item .tabcordion_nav-trigger', function (keyVent) {\n      var which = keyVent.which;\n      var target = keyVent.target;\n\n      if ($.inArray(which, keys.ARROWS) > -1) {\n        var adjacentTab = findAdjacentTab(target, $navlist, which);\n\n        if (adjacentTab) {\n          keyVent.preventDefault();\n          adjacentTab.focus();\n\n          setActiveAndInactive(adjacentTab, $navlist);\n        }\n      } else if (which === keys.ENTER || which === keys.SPACE) {\n        keyVent.preventDefault();\n        target.click();\n      } else if (which === keys.PAGE_DOWN) {\n        keyVent.preventDefault();\n        var assocPanel = $('#' + this.getAttribute('aria-controls'));\n\n        if (assocPanel) {\n          assocPanel.focus();\n        }\n      }\n    });\n\n    // Click support\n    $navlist.on('click', '.tabcordion_nav-item .tabcordion_nav-trigger', function () {\n      var currentTarget = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n      if (currentTarget != $(this)[0]) {\n        var eventData = {'previousTarget': currentTarget, 'newTarget': $(this)[0]};\n        var event = new CustomEvent('rb.tabcordion.tabChanged', {detail: eventData});\n        $(this)[0].dispatchEvent(event);\n      }\n\n      setActiveAndInactive(this, $navlist);\n    });\n  });\n\n  $(document.body).on('keydown', '.tabcordion_panel', function (e) {\n    if (e.which === keys.PAGE_UP) {\n      e.preventDefault();\n      var $navlist = $(this).closest('.tabcordion').find('.tabcordion_navlist');\n      var activeTab = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n\n      if (activeTab) {\n        activeTab.focus();\n      }\n    }\n  });\n\n  function findAdjacentTab(startTab, $list, key) {\n    var dir = (key === keys.ARROW_LEFT || key === keys.ARROW_UP) ? 'prev' : 'next';\n    var adjacentTab = (dir === 'prev') ?\n                      $(startTab.parentNode).prev()[0] :\n                      $(startTab.parentNode).next()[0];\n\n    if (!adjacentTab) {\n      var allTabs = $list.find('.tabcordion_nav-item');\n      if (dir === 'prev') {\n        adjacentTab = allTabs[allTabs.length - 1];\n      } else {\n        adjacentTab = allTabs[0];\n      }\n    }\n\n    return $(adjacentTab).find('.tabcordion_nav-trigger')[0];\n  }\n\n  function setActiveAndInactive(newActive, $list) {\n    $list.find('.tabcordion_nav-item').each(function () {\n      var assocPanelID = $(this)\n                            .find('.tabcordion_nav-trigger')\n                            .first()\n                            .attr('aria-controls');\n      var anchor = $(this).find('.tabcordion_nav-trigger')[0];\n\n      if (this !== newActive.parentNode ||\n          ($(this).hasClass('is-active') && $(this).closest('.tabcordion').hasClass('is-accordion'))) {\n        $(this).removeClass('is-active');\n        anchor.tabIndex = -1;\n        anchor.setAttribute('aria-selected', 'false');\n        $('#' + assocPanelID)\n          .removeClass('is-current')\n          .attr('aria-hidden', 'true');\n      } else {\n        $(this).addClass('is-active');\n        anchor.tabIndex = 0;\n        anchor.setAttribute('aria-selected', 'true');\n        $('#' + assocPanelID)\n          .addClass('is-current')\n          .removeAttr('aria-hidden');\n      }\n    });\n  }\n\n  // Initial configuration based on viewport width\n  determineView();\n\n  // Debounced Resize() jQuery Plugin\n  // Author: Paul Irish\n  (function ($, sr) {\n    // debouncing function from John Hann\n    // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/\n    var debounce = function (func, threshold, execAsap) {\n      var timeout;\n\n      return function debounced() {\n        var obj = this;\n        var args = arguments;\n        function delayed() {\n          if (!execAsap) {\n            func.apply(obj, args);\n          }\n          timeout = null;\n        }\n\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        else if (execAsap) {\n          func.apply(obj, args);\n        }\n\n        timeout = setTimeout(delayed, threshold || 100);\n      };\n    };\n    // smartresize\n    jQuery.fn[sr] = function (fn) { return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };\n  })(jQuery, 'smartresize');\n\n  // Resize event:\n  $(window).smartresize(determineView);\n\n  function determineView() {\n    var $tabContainer = $('.tabcordion');\n    var breakpointOverride = $tabContainer.data('breakpoint');\n    var breakpoint = breakpointOverride ? breakpointOverride : 480;\n\n    $tabContainer.each(function () {\n      var $tabcordion = $(this);\n      var containerWidth = $tabcordion.width();\n      var $panels = $tabcordion.find('.tabcordion_panels');\n      var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n      var isStatic = $tabcordion.hasClass('is-static');\n      var isAccordionView = $tabcordion.hasClass('is-accordion');\n      var isTabsView = !isAccordionView;\n\n      if (!isStatic) {\n        if (containerWidth <= breakpoint && !isAccordionView) {\n          // Switch to accordion\n          $tabcordion\n            .removeClass('is-tabs')\n            .addClass('is-accordion');\n\n          // Better markup semantics for accordion\n          $panels.find('.tabcordion_panel').each(function () {\n            var panelID = this.id;\n            var assocLink = panelID && $('.tabcordion_navlist .tabcordion_nav-trigger[aria-controls=\"' + panelID + '\"]')[0];\n            if (assocLink) {\n              $(assocLink.parentNode).append(this);\n            }\n          });\n        } else if (containerWidth > breakpoint && !isTabsView) {\n          // Switch to tabs\n          var wasAccordion = $tabcordion.hasClass('is-accordion');\n          $tabcordion\n            .removeClass('is-accordion')\n            .addClass('is-tabs');\n\n          if (wasAccordion) {\n            $navlist.find('.tabcordion_panel').each(function () {\n              $panels.append(this);\n            });\n          }\n        }\n      }\n    });\n  }\n})(jQuery);\n"],"sourceRoot":"../.."}