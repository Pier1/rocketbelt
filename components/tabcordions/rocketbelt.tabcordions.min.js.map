{"version":3,"sources":["components/tabcordions/rocketbelt.tabcordions.min.js"],"names":["$","findAdjacentTab","startTab","$list","key","dir","keys","ARROW_LEFT","ARROW_UP","adjacentTab","parentNode","prev","next","allTabs","find","length","setActiveAndInactive","newActive","each","assocPanelID","this","first","attr","anchor","removeClass","tabIndex","setAttribute","addClass","removeAttr","determineView","$tabContainer","$tabcordion","containerWidth","width","$panels","$navlist","isStatic","hasClass","isAccordionView","isTabsView","panelID","id","assocLink","append","wasAccordion","$tabcordions","ARROWS","ARROW_RIGHT","ARROW_DOWN","ENTER","SPACE","PAGE_UP","PAGE_DOWN","on","keyVent","which","target","inArray","preventDefault","focus","click","assocPanel","getAttribute","currentTarget","eventData","previousTarget","newTarget","event","CustomEvent","detail","dispatchEvent","document","body","e","closest","activeTab","sr","debounce","func","threshold","execAsap","timeout","delayed","apply","obj","args","arguments","clearTimeout","setTimeout","jQuery","fn","bind","trigger","window","smartresize"],"mappings":"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","file":"rocketbelt.tabcordions.min.js","sourcesContent":["(function ($) {\n  var $tabcordions = $('.tabcordion');\n\n  var keys = {\n    ARROWS: [37, 38, 39, 40],\n    ARROW_LEFT: 37,\n    ARROW_UP: 38,\n    ARROW_RIGHT: 39,\n    ARROW_DOWN: 40,\n    ENTER: 13,\n    SPACE: 32,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34\n  };\n\n  $tabcordions.each(function () {\n    var $tabcordion = $(this);\n    var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n    $navlist.on('keydown', '.tabcordion_nav-item .tabcordion_nav-trigger', function (keyVent) {\n      var which = keyVent.which;\n      var target = keyVent.target;\n\n      if ($.inArray(which, keys.ARROWS) > -1) {\n        var adjacentTab = findAdjacentTab(target, $navlist, which);\n\n        if (adjacentTab) {\n          keyVent.preventDefault();\n          adjacentTab.focus();\n\n          setActiveAndInactive(adjacentTab, $navlist);\n        }\n      }\n      else if (which === keys.ENTER || which === keys.SPACE) {\n        keyVent.preventDefault();\n        target.click();\n      }\n      else if (which === keys.PAGE_DOWN) {\n        keyVent.preventDefault();\n        var assocPanel = $('#' + this.getAttribute('aria-controls'));\n\n        if (assocPanel) {\n          assocPanel.focus();\n        }\n      }\n    });\n\n    // Click support\n    $navlist.on('click', '.tabcordion_nav-item .tabcordion_nav-trigger', function () {\n\n      var currentTarget = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n      if (currentTarget != $(this)[0]) {\n        var eventData = {'previousTarget': currentTarget, 'newTarget': $(this)[0]};\n        var event = new CustomEvent('rb.tabcordion.tabChanged', {detail: eventData});\n        $(this)[0].dispatchEvent(event);\n      }\n      \n      setActiveAndInactive(this, $navlist);\n      \n    });\n  });\n\n  $(document.body).on('keydown', '.tabcordion_panel', function (e) {\n    if (e.which === keys.PAGE_UP) {\n      e.preventDefault();\n      var $navlist = $(this).closest('.tabcordion').find('.tabcordion_navlist');\n      var activeTab = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n\n      if (activeTab) {\n        activeTab.focus();\n      }\n    }\n  });\n\n  function findAdjacentTab(startTab, $list, key) {\n    var dir = (key === keys.ARROW_LEFT || key === keys.ARROW_UP) ? 'prev' : 'next';\n    var adjacentTab = (dir === 'prev') ?\n                      $(startTab.parentNode).prev()[0] :\n                      $(startTab.parentNode).next()[0];\n\n    if (!adjacentTab) {\n      var allTabs = $list.find('.tabcordion_nav-item');\n      if (dir === 'prev') {\n        adjacentTab = allTabs[allTabs.length - 1];\n      }\n      else {\n        adjacentTab = allTabs[0];\n      }\n    }\n\n    return $(adjacentTab).find('.tabcordion_nav-trigger')[0];\n  }\n\n  function setActiveAndInactive(newActive, $list) {\n    $list.find('.tabcordion_nav-item').each(function () {\n      var assocPanelID = $(this)\n                            .find('.tabcordion_nav-trigger')\n                            .first()\n                            .attr('aria-controls');\n      var anchor = $(this).find('.tabcordion_nav-trigger')[0];\n\n      if (this !== newActive.parentNode) {\n        $(this).removeClass('is-active');\n        anchor.tabIndex = -1;\n        anchor.setAttribute('aria-selected', 'false');\n        $('#' + assocPanelID)\n          .removeClass('is-current')\n          .attr('aria-hidden', 'true');\n      }\n      else {\n        $(this).addClass('is-active');\n        anchor.tabIndex = 0;\n        anchor.setAttribute('aria-selected', 'true');\n        $('#' + assocPanelID)\n          .addClass('is-current')\n          .removeAttr('aria-hidden');\n      }\n    });\n  }\n\n  // Initial configuration based on viewport width\n  determineView();\n\n  // Debounced Resize() jQuery Plugin\n  // Author: Paul Irish\n  (function ($, sr) {\n    // debouncing function from John Hann\n    // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/\n    var debounce = function (func, threshold, execAsap) {\n      var timeout;\n\n      return function debounced() {\n        var obj = this;\n        var args = arguments;\n        function delayed() {\n          if (!execAsap) {\n            func.apply(obj, args);\n          }\n          timeout = null;\n        }\n\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        else if (execAsap) {\n          func.apply(obj, args);\n        }\n\n        timeout = setTimeout(delayed, threshold || 100);\n      };\n    };\n    // smartresize\n    jQuery.fn[sr] = function (fn) { return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };\n  })(jQuery, 'smartresize');\n\n  // Resize event:\n  $(window).smartresize(determineView);\n\n  function determineView() {\n    \n    var $tabContainer = $('.tabcordion');\n    var breakpoint = 480;\n\n    $tabContainer.each(function () {\n      var $tabcordion = $(this);\n      var containerWidth = $tabcordion.width();\n      var $panels = $tabcordion.find('.tabcordion_panels');\n      var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n      var isStatic = $tabcordion.hasClass('is-static');\n      var isAccordionView = $tabcordion.hasClass('is-accordion');\n      var isTabsView = !isAccordionView;\n\n      if (!isStatic) {\n        if (containerWidth <= breakpoint && !isAccordionView) {\n          // Switch to accordion\n          $tabcordion\n            .removeClass('is-tabs')\n            .addClass('is-accordion');\n\n          // Better markup semantics for accordion\n          $panels.find('.tabcordion_panel').each(function () {\n            var panelID = this.id;\n            var assocLink = panelID && $('.tabcordion_navlist .tabcordion_nav-trigger[aria-controls=\"' + panelID + '\"]')[0];\n            if (assocLink) {\n              $(assocLink.parentNode).append(this);\n            }\n          });\n        }\n        else if (containerWidth > breakpoint && !isTabsView) {\n          // Switch to tabs\n          var wasAccordion = $tabcordion.hasClass('is-accordion');\n          $tabcordion\n            .removeClass('is-accordion')\n            .addClass('is-tabs');\n\n          if (wasAccordion) {\n            $navlist.find('.tabcordion_panel').each(function () {\n              $panels.append(this);\n            });\n          }\n        }\n      }\n    });\n  }\n})(jQuery);\n"],"sourceRoot":"../.."}