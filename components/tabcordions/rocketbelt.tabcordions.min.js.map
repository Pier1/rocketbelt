{"version":3,"sources":["components/tabcordions/rocketbelt.tabcordions.min.js"],"names":["rb","document","keys","init","selector","$tabcordion","$","this","Number","isInteger","$navlist","find","on","keyVent","target","adjacentTab","findAdjacentTab","$list","key","dir","allTabs","startTab","parentNode","prev","next","length","setActiveAndInactive","which","preventDefault","focus","dispatchEvent","event","detail","CustomEvent","newTarget","click","assocPanel","getAttribute","currentTarget","eventData","previousTarget","addAriaAttributes","determineView","el","posinset","$tabTriggers","each","i","setsize","e","PAGE_UP","anchor","newActive","setAttribute","assocPanelID","first","attr","hasClass","closest","removeClass","$tabContainer","breakpointOverride","breakpoint","containerWidth","$panels","addClass","isStatic","panelID","assocLink","append","isAccordionView","isTabsView","id","$tabcordions","tabcordions","wasAccordion","body","activeTab","window","addEventListener","jQuery"],"mappings":"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","file":"rocketbelt.tabcordions.min.js","sourcesContent":["'use strict';\n\n((rb, document, $) => {\n  const keys = {\n    ARROWS: [37, 38, 39, 40],\n    ARROW_LEFT: 37,\n    ARROW_UP: 38,\n    ARROW_RIGHT: 39,\n    ARROW_DOWN: 40,\n    ENTER: 13,\n    SPACE: 32,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34\n  };\n\n  const init = function init(selector) {\n    let $tabcordion = $(this);\n\n    // Check Number.isInteger because the init function is called\n    // from $.each, which passes the array index.\n    if (selector && !(Number.isInteger(selector))) {\n      $tabcordion = $(selector);\n    }\n\n    const $navlist = $tabcordion.find('.tabcordion_navlist');\n\n    $navlist.on('keydown', '.tabcordion_nav-item .tabcordion_nav-trigger',\n      function onKeydown(keyVent) {\n        const which = keyVent.which;\n        const target = keyVent.target;\n\n        if ($.inArray(which, keys.ARROWS) > -1) {\n          const adjacentTab = findAdjacentTab(target, $navlist, which);\n\n          if (adjacentTab) {\n            keyVent.preventDefault();\n            adjacentTab.focus();\n\n            const eventData = { 'previousTarget': target, 'newTarget': adjacentTab };\n            const event = new CustomEvent('rb.tabcordion.tabChanged', { detail: eventData });\n            $tabcordion[0].dispatchEvent(event);\n\n            setActiveAndInactive(adjacentTab, $navlist);\n          }\n        } else if (which === keys.ENTER || which === keys.SPACE) {\n          keyVent.preventDefault();\n          target.click();\n        } else if (which === keys.PAGE_DOWN) {\n          keyVent.preventDefault();\n          const assocPanel = $(`#${this.getAttribute('aria-controls')}`);\n\n          if (assocPanel) {\n            assocPanel.focus();\n          }\n        }\n      }\n    );\n\n    // Click support\n    $navlist.on('click', '.tabcordion_nav-item .tabcordion_nav-trigger',\n      function onClick() {\n        const currentTarget =\n          $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n        if (currentTarget != $(this)[0]) {\n          const eventData = { 'previousTarget': currentTarget, 'newTarget': $(this)[0] };\n          const event = new CustomEvent('rb.tabcordion.tabChanged', { detail: eventData });\n          $tabcordion[0].dispatchEvent(event);\n        }\n\n        setActiveAndInactive(this, $navlist);\n      }\n    );\n\n    addAriaAttributes($tabcordion);\n\n    // Initial configuration based on viewport width\n    determineView();\n  };\n\n  const addAriaAttributes = ($tabcordion) => {\n    const $tabTriggers = $tabcordion.find('.tabcordion_nav-trigger');\n\n    $tabTriggers.each((i, el) => {\n      $(el).attr(rb.aria.setsize, $tabTriggers.length);\n      $(el).attr(rb.aria.posinset, i + 1);\n    });\n  };\n\n  $(document.body).on('keydown', '.tabcordion_panel', function onKeydown(e) {\n    if (e.which === keys.PAGE_UP) {\n      e.preventDefault();\n      const $navlist = $(this).closest('.tabcordion').find('.tabcordion_navlist');\n      const activeTab = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n\n      if (activeTab) {\n        activeTab.focus();\n      }\n    }\n  });\n\n  function findAdjacentTab(startTab, $list, key) {\n    const dir = (key === keys.ARROW_LEFT || key === keys.ARROW_UP) ? 'prev' : 'next';\n    let adjacentTab = (dir === 'prev') ?\n                      $(startTab.parentNode).prev()[0] :\n                      $(startTab.parentNode).next()[0];\n\n    if (!adjacentTab) {\n      const allTabs = $list.find('.tabcordion_nav-item');\n      if (dir === 'prev') {\n        adjacentTab = allTabs[allTabs.length - 1];\n      } else {\n        adjacentTab = allTabs[0];\n      }\n    }\n\n    return $(adjacentTab).find('.tabcordion_nav-trigger')[0];\n  }\n\n  function setActiveAndInactive(newActive, $list) {\n    $list.find('.tabcordion_nav-item').each(function decorateNavItems() {\n      const assocPanelID = $(this)\n                            .find('.tabcordion_nav-trigger')\n                            .first()\n                            .attr('aria-controls');\n      const anchor = $(this).find('.tabcordion_nav-trigger')[0];\n\n      if (this !== newActive.parentNode ||\n          ($(this).hasClass('is-active') &&\n           $(this).closest('.tabcordion').hasClass('is-accordion'))) {\n        $(this).removeClass('is-active');\n        anchor.tabIndex = -1;\n        anchor.setAttribute('aria-selected', 'false');\n        $('#' + assocPanelID)\n          .removeClass('is-current')\n          .attr('aria-hidden', 'true');\n      } else {\n        $(this).addClass('is-active');\n        anchor.tabIndex = 0;\n        anchor.setAttribute('aria-selected', 'true');\n        $(`#${assocPanelID}`)\n          .addClass('is-current')\n          .removeAttr('aria-hidden');\n      }\n    });\n  }\n\n  function determineView() {\n    const $tabContainer = $('.tabcordion');\n    const breakpointOverride = $tabContainer.data('breakpoint');\n    const breakpoint = breakpointOverride ? breakpointOverride : 480;\n\n    $tabContainer.each(function setView() {\n      const $tabcordion = $(this);\n      const containerWidth = $tabcordion.width();\n      const $panels = $tabcordion.find('.tabcordion_panels');\n      const $navlist = $tabcordion.find('.tabcordion_navlist');\n\n      const isStatic = $tabcordion.hasClass('is-static');\n      const isAccordionView = $tabcordion.hasClass('is-accordion');\n      const isTabsView = !isAccordionView;\n\n      if (!isStatic) {\n        if (containerWidth <= breakpoint && !isAccordionView) {\n          // Switch to accordion\n          $tabcordion\n            .removeClass('is-tabs')\n            .addClass('is-accordion');\n\n          // Better markup semantics for accordion\n          $panels.find('.tabcordion_panel').each(function setPanelID() {\n            const panelID = this.id;\n            const assocLink = panelID &&\n              $(`.tabcordion_navlist .tabcordion_nav-trigger[aria-controls=\"${panelID}\"]`)[0];\n            if (assocLink) {\n              $(assocLink.parentNode).append(this);\n            }\n          });\n        } else if (containerWidth > breakpoint && !isTabsView) {\n          // Switch to tabs\n          const wasAccordion = $tabcordion.hasClass('is-accordion');\n          $tabcordion\n            .removeClass('is-accordion')\n            .addClass('is-tabs');\n\n          if (wasAccordion) {\n            $navlist.find('.tabcordion_panel').each(function appendPanel() {\n              $panels.append(this);\n            });\n          }\n        }\n      }\n    });\n  }\n\n  const $tabcordions = $('.tabcordion');\n  $tabcordions.each(init);\n  window.addEventListener('rb.optimizedResize', determineView);\n\n  rb.tabcordions = rb.tabcordions || {};\n  rb.tabcordions.init = init;\n  rb.tabcordions.addAriaAttributes = addAriaAttributes;\n})(window.rb, document, jQuery);\n"],"sourceRoot":"../.."}