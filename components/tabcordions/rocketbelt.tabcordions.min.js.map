{"version":3,"sources":["components/tabcordions/rocketbelt.tabcordions.min.js"],"names":["$","findAdjacentTab","startTab","$list","key","dir","keys","ARROW_LEFT","ARROW_UP","adjacentTab","parentNode","prev","next","allTabs","find","length","setActiveAndInactive","newActive","each","assocPanelID","this","first","attr","anchor","hasClass","closest","removeClass","tabIndex","setAttribute","addClass","removeAttr","determineView","$tabContainer","breakpointOverride","data","breakpoint","$tabcordion","containerWidth","width","$panels","$navlist","isStatic","isAccordionView","isTabsView","panelID","id","assocLink","append","wasAccordion","$tabcordions","ARROWS","ARROW_RIGHT","ARROW_DOWN","ENTER","SPACE","PAGE_UP","PAGE_DOWN","on","keyVent","which","target","inArray","preventDefault","focus","click","assocPanel","getAttribute","currentTarget","eventData","previousTarget","newTarget","event","CustomEvent","detail","dispatchEvent","document","body","e","activeTab","sr","debounce","func","threshold","execAsap","timeout","delayed","apply","obj","args","arguments","clearTimeout","setTimeout","jQuery","fn","bind","trigger","window","smartresize"],"mappings":"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","file":"rocketbelt.tabcordions.min.js","sourcesContent":["(function ($) {\n  var $tabcordions = $('.tabcordion');\n\n  var keys = {\n    ARROWS: [37, 38, 39, 40],\n    ARROW_LEFT: 37,\n    ARROW_UP: 38,\n    ARROW_RIGHT: 39,\n    ARROW_DOWN: 40,\n    ENTER: 13,\n    SPACE: 32,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34\n  };\n\n  $tabcordions.each(function () {\n    var $tabcordion = $(this);\n    var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n    $navlist.on('keydown', '.tabcordion_nav-item .tabcordion_nav-trigger', function (keyVent) {\n      var which = keyVent.which;\n      var target = keyVent.target;\n\n      if ($.inArray(which, keys.ARROWS) > -1) {\n        var adjacentTab = findAdjacentTab(target, $navlist, which);\n\n        if (adjacentTab) {\n          keyVent.preventDefault();\n          adjacentTab.focus();\n\n          setActiveAndInactive(adjacentTab, $navlist);\n        }\n      } else if (which === keys.ENTER || which === keys.SPACE) {\n        keyVent.preventDefault();\n        target.click();\n      } else if (which === keys.PAGE_DOWN) {\n        keyVent.preventDefault();\n        var assocPanel = $('#' + this.getAttribute('aria-controls'));\n\n        if (assocPanel) {\n          assocPanel.focus();\n        }\n      }\n    });\n\n    // Click support\n    $navlist.on('click', '.tabcordion_nav-item .tabcordion_nav-trigger', function () {\n      var currentTarget = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n      if (currentTarget != $(this)[0]) {\n        var eventData = {'previousTarget': currentTarget, 'newTarget': $(this)[0]};\n        var event = new CustomEvent('rb.tabcordion.tabChanged', {detail: eventData});\n        $(this)[0].dispatchEvent(event);\n      }\n\n      setActiveAndInactive(this, $navlist);\n    });\n  });\n\n  $(document.body).on('keydown', '.tabcordion_panel', function (e) {\n    if (e.which === keys.PAGE_UP) {\n      e.preventDefault();\n      var $navlist = $(this).closest('.tabcordion').find('.tabcordion_navlist');\n      var activeTab = $navlist.find('.tabcordion_nav-item.is-active .tabcordion_nav-trigger')[0];\n\n      if (activeTab) {\n        activeTab.focus();\n      }\n    }\n  });\n\n  function findAdjacentTab(startTab, $list, key) {\n    var dir = (key === keys.ARROW_LEFT || key === keys.ARROW_UP) ? 'prev' : 'next';\n    var adjacentTab = (dir === 'prev') ?\n                      $(startTab.parentNode).prev()[0] :\n                      $(startTab.parentNode).next()[0];\n\n    if (!adjacentTab) {\n      var allTabs = $list.find('.tabcordion_nav-item');\n      if (dir === 'prev') {\n        adjacentTab = allTabs[allTabs.length - 1];\n      } else {\n        adjacentTab = allTabs[0];\n      }\n    }\n\n    return $(adjacentTab).find('.tabcordion_nav-trigger')[0];\n  }\n\n  function setActiveAndInactive(newActive, $list) {\n    $list.find('.tabcordion_nav-item').each(function () {\n      var assocPanelID = $(this)\n                            .find('.tabcordion_nav-trigger')\n                            .first()\n                            .attr('aria-controls');\n      var anchor = $(this).find('.tabcordion_nav-trigger')[0];\n\n      if (this !== newActive.parentNode ||\n          ($(this).hasClass('is-active') && $(this).closest('.tabcordion').hasClass('is-accordion'))) {\n        $(this).removeClass('is-active');\n        anchor.tabIndex = -1;\n        anchor.setAttribute('aria-selected', 'false');\n        $('#' + assocPanelID)\n          .removeClass('is-current')\n          .attr('aria-hidden', 'true');\n      } else {\n        $(this).addClass('is-active');\n        anchor.tabIndex = 0;\n        anchor.setAttribute('aria-selected', 'true');\n        $('#' + assocPanelID)\n          .addClass('is-current')\n          .removeAttr('aria-hidden');\n      }\n    });\n  }\n\n  // Initial configuration based on viewport width\n  determineView();\n\n  // Debounced Resize() jQuery Plugin\n  // Author: Paul Irish\n  (function ($, sr) {\n    // debouncing function from John Hann\n    // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/\n    var debounce = function (func, threshold, execAsap) {\n      var timeout;\n\n      return function debounced() {\n        var obj = this;\n        var args = arguments;\n        function delayed() {\n          if (!execAsap) {\n            func.apply(obj, args);\n          }\n          timeout = null;\n        }\n\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        else if (execAsap) {\n          func.apply(obj, args);\n        }\n\n        timeout = setTimeout(delayed, threshold || 100);\n      };\n    };\n    // smartresize\n    jQuery.fn[sr] = function (fn) { return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };\n  })(jQuery, 'smartresize');\n\n  // Resize event:\n  $(window).smartresize(determineView);\n\n  function determineView() {\n    var $tabContainer = $('.tabcordion');\n    var breakpointOverride = $tabContainer.data('breakpoint');\n    var breakpoint = breakpointOverride ? breakpointOverride : 480;\n\n    $tabContainer.each(function () {\n      var $tabcordion = $(this);\n      var containerWidth = $tabcordion.width();\n      var $panels = $tabcordion.find('.tabcordion_panels');\n      var $navlist = $tabcordion.find('.tabcordion_navlist');\n\n      var isStatic = $tabcordion.hasClass('is-static');\n      var isAccordionView = $tabcordion.hasClass('is-accordion');\n      var isTabsView = !isAccordionView;\n\n      if (!isStatic) {\n        if (containerWidth <= breakpoint && !isAccordionView) {\n          // Switch to accordion\n          $tabcordion\n            .removeClass('is-tabs')\n            .addClass('is-accordion');\n\n          // Better markup semantics for accordion\n          $panels.find('.tabcordion_panel').each(function () {\n            var panelID = this.id;\n            var assocLink = panelID && $('.tabcordion_navlist .tabcordion_nav-trigger[aria-controls=\"' + panelID + '\"]')[0];\n            if (assocLink) {\n              $(assocLink.parentNode).append(this);\n            }\n          });\n        } else if (containerWidth > breakpoint && !isTabsView) {\n          // Switch to tabs\n          var wasAccordion = $tabcordion.hasClass('is-accordion');\n          $tabcordion\n            .removeClass('is-accordion')\n            .addClass('is-tabs');\n\n          if (wasAccordion) {\n            $navlist.find('.tabcordion_panel').each(function () {\n              $panels.append(this);\n            });\n          }\n        }\n      }\n    });\n  }\n})(jQuery);\n"],"sourceRoot":"../.."}